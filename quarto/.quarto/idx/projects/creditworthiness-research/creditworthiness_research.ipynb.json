{"title":"Исследование надёжности заёмщиков","markdown":{"yaml":{"description_for_list":"Исследование влияния семейного положения и количества детей клиента на факт погашения кредита в срок для кредитного отдела банка.","format":{"html":{"code-fold":true,"code-summary":"Show the code","fontsize":"16px","smooth-scroll":true,"toc":true,"toc-location":"left","toc-title":"Оглавление","grid":{"body-width":"1100px"}}},"title":"Исследование надёжности заёмщиков"},"headingText":"Загрузка библиотек <skip>","containsRefs":false,"markdown":"\n\n\n\n\n\n\n\n\n\n**Автор:**  \nГригорьев Павел   \n\n\n**Описание проекта:**   \nЗаказчик - кредитный отдел банка.  \nНужно разобраться, влияет ли семейное положение и количество детей клиента на факт погашения кредита в срок.  \nВходные данные от банка - статистика о платёжеспособности клиентов.    \nРезультаты исследования будут учтены при построении модели кредитного скоринга - специальной системы, которая оценивает способность потенциального заёмщика вернуть кредит банку.  \n\n\n**Цель:**   \nСоставить рекомендации для кредитного отдела банка, которые будут учтены при построении модели кредитного скоринга.  \nОпределить влияет ли семейное положение и количество детей клиента на факт погашения кредита в срок.  \n\n**Источники данных:**   \nСтатистика о платёжеспособности клиентов.\n\n**Главные выводы:**<a name=\"ref-to-conclusions\"></a><a name=\"ref-to-toc\"></a>\n\n- <a href='#Нет-явной-зависимости-семейного-положения-и-задолженности-'>Нет явной зависимости семейного положения и задолженности.</a>  \n- <a href='#У-должников-в-среднем-больше-детей--В-частности--среди-должников-женщины-имеют-больше-детей-в-среднем--чем-мужчины--а-среди-не-должников-мужчины-имеют-больше-детей-в-среднем--чем-женщины'>У должников в среднем больше детей. В частности, среди должников женщины имеют больше детей в среднем, чем мужчины, а среди не должников мужчины имеют больше детей в среднем, чем женщины</a>  \n- <a href='#Женщины-чаще-возвращают-кредит--чем-мужчины-'>Женщины чаще возвращают кредит, чем мужчины.</a>  \n- <a href='#Долги-присутствуют-у-людей-с-разным-доходом-'>Долги присутствуют у людей с разным доходом.</a>  \n- <a href='#Люди-старше-60-лет-реже-других-имеют-долги'>Люди старше 60 лет реже других имеют долги.</a>  \n- <a href='#Кредиты-оформленные-на-цели-связанные-с-недвижимостью-реже-других-приводят-к-долгам'>Кредиты, оформленные на цели, связанные с недвижимостью, реже других приводят к долгам.</a>  \n- <a href='#У-должников-средний-возраст-немного-ниже-для-всех-категорий-семейного-положения-'>У должников средний возраст немного ниже для всех категорий семейного положения.</a>  \n- <a href='#Медианный-доход-у-должников-и-не-должников-практически-не-отличается'>Медианный доход у должников и не должников практически не отличается</a>  \n- <a href='#Должники-имеют-ниже-средний-возраст-как-мужчины-так-и-женщины--Ситуация-сохраняется-во-всех-группах-дохода-'>Должники имеют ниже средний возраст как мужчины так и женщины. Ситуация сохраняется во всех группах дохода.</a>  \n- <a href='#Больше-всего-кредит-берут-на-цели--связанные-с-недвижимостью--кроме-людей-в-гражданском-браке'>Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке</a>  \n- <a href='#Люди-в-гражданском-браке-чаще-берут-кредит-на-свадьбу'>Люди в гражданском браке чаще берут кредит на свадьбу</a>  \n- <a href='#Доход-является-самым-значимым-признаком-для-предсказания-задолженности-'>Доход является самым значимым признаком для предсказания задолженности.</a>  \n- <a href='#Люди-от-30-до-50-лет-имеют-самый-высокий-средний-доход-'>Люди от 30 до 50 лет имеют самый высокий средний доход.</a>  \n- <a href='#Только-5-процентов-клиентов-моложе-25-лет--Основная-часть-клиентов-старше-30-лет-'>Только 5 процентов клиентов моложе 25 лет. Основная часть клиентов старше 30 лет.</a>  \n- <a href='#Меньше-5---клиентов-имеют-зарплату-меньша-63-тысяч--Можно-сделать-вывод--что-большинство-имеет-высокий-доход'>Меньше 5 % клиентов имеют зарплату меньша 63 тысяч. При этом 25 % имеют доход больше 200 тысяч.</a>  \n- <a href='#58---клиентов-либо-женаты--либо-замужем--19---в-гражданском-браке--Можно-сделать-вывод-что-большинство-в-браке-'>58 % клиентов либо женаты, либо замужем. 19 % в гражданском браке. Можно сделать вывод что большинство в браке.</a>  \n- <a href='#Большинство-клиентов-женщины--66-процентов--'>Большинство клиентов женщины (66 процентов).</a>  \n- <a href='#92---клиентов-не-имеют-долга-'>92 % клиентов не имеют долга.</a>  \n- <a href='#Чем-меньше-количество-детей--тем-больше-значений-с-высоким-доходом-'>Чем меньше количество детей, тем больше значений с высоким доходом.</a>  \n- <a href='#Большая-часть-женатых-имеет-доход-100-200-тыс'>Большая часть женатых имеет доход 100-200 тыс</a>  \n- <a href='#На-всех-уровнях-образования--кроме-ученой-степени--доход-у-мужчин-выше-'>На всех уровнях образования, кроме ученой степени, доход у мужчин выше.</a>  \n- <a href='#Цель-получения-кредита-практически-не-зависит-от-среднего-ежемесячного-дохода-'>Цель получения кредита практически не зависит от среднего ежемесячного дохода.</a>  \n- <a href='#У-мужчин--которые-в-браке-или-были-в-браке--количество-детей-больше--чем-у-женщин-в-той-же-категории-'>У мужчин, которые в браке или были в браке, количество детей больше, чем у женщин в той же категории.</a>  \n\n\n**Аномалии и особенности в данных:**<a name=\"ref-to-anomalies\"></a>\n\n- <a href='#В-датафрейме-есть-строки-дубликаты--54-строки--Меньше-1---от-всего-датафрейма-'>В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.</a>  \n- <a href='#В-столбце-с-количеством-детей-есть-отрицательные-значения--47-штук--Меньше-1-процента-от-всего-датафрейма--Также-есть-клиенты-с-20-детьми-'>В столбце с количеством детей есть отрицательные значения. 47 штук. Меньше 1 процента от всего датафрейма. Также есть клиенты с 20 детьми.</a>  \n- <a href='#Колонка-общий-трудовой-стаж-содержит-74---отрицательных-значений--А-также-максимальное-количество-дней-стажа-больше-400-тысяч-дней--это-больше-1000-лет-'>Колонка общий трудовой стаж содержит 74 % отрицательных значений. А также максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет.</a>  \n- <a href='#В-колонке-возраста-101-нулевое-значение-'>В колонке возраста 101 нулевое значение.</a>  \n- <a href='#Колонка-дохода-имеет-слишком-много-знаков-после-запятой-'>Колонка дохода имеет слишком много знаков после запятой.</a>  \n- <a href='#В-колонке-с-образованием-присутствуют-одни-и-те-же-значения-с-разными-регистрами--При-этом-в-колонке-с-id-образования-все-в порядке-'>В колонке с образованием присутствуют одни и те же значения с разными регистрами. При этом в колонке с id образования все в порядке.</a>  \n\n\n**Рекомендации:**\n\n- Добавить контроль данных, чтобы не дублировались значения с разными регистрами в колонке с образованием.\n- Добавить уникальный идентификатор клиента, чтобы избежать дублирования строк.\n- Добавить проверку на отрицательные значения и на слишком большие значения в количестве детей при загрузке данных.\n- Выяснить откуда возникают отрицательные значения в трудовом стаже и добавить контроль ввода невалидных данных.\n- Выяснить причину нулевых значений в колонке возраста и добавить проверку на нулевые значения при загрузке данных.\n- Выяснить причину большого количества знаков после запятой в колонке дохода.\n\n\n## 1. Описание и изучение данных<a name='1--Описание-и-изучение-данных'></a>\n\n### 1.1 Описание данных<a name='1-1-Описание-данных'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- children - количество детей в семье\n- days_employed - общий трудовой стаж в днях\n- dob_years - возраст клиента в годах\n- education - уровень образования клиента\n- education_id - идентификатор уровня образования\n- family_status - семейное положение\n- family_status_id - идентификатор семейного положения\n- gender - пол клиента\n- income_type - тип занятости\n- debt - имел ли задолженность по возврату кредитов\n- total_income - ежемесячный доход\n- purpose - цель получения кредита\n\n### 1.2 Изучение данных<a name='1-2-Изучение-данных'></a>\n\n#### 1.2.1 Изучение переменных<a name='1-2-1-Изучение-переменных'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nИзменим название колонки dob_years на более понятное age\n\nИзменим значения в столбце debt на 'есть', 'нет'\n\nИзучим отдельно каждую колонку\n\n<a name='В-датафрейме-есть-строки-дубликаты--54-строки--Меньше-1---от-всего-датафрейма-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.  \n\nЕсли заменить все пробелы на 1, привести к нижнему регистру, то дополнительно появляется 31 дубликат.  \n\nНужно детальнее изучить дубликаты.  \n\n<a name='В-столбце-с-количеством-детей-есть-отрицательные-значения--47-штук--Меньше-1-процента-от-всего-датафрейма--Также-есть-клиенты-с-20-детьми-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В столбце с количеством детей нет пропущенных значений.  \n- Уникальных всего 8 значений. Это нормально. Количество детей не может сильно варьироваться.\n- Наличие нулей нормально, это люди без детей, таких 66 %.  \n- Есть отрицательные значения.  47 штук. Меньше 1 процента. Это явно ошибка. В реальных данных таких не должно быть.   \nНужно выяснить почему появились отрицательное количество детей.  \n- Максимальное количество детей 20. Это скорее всего ошибка.\n- 66 процентов имеют 0 детей, 22 процента имеют 1 ребенка, 10 % имеют 2 детей и меньше 5 % имеют более 2 детей.  \n- Распределение детей соответствует реальности, больше всего людей без детей.\n\n\n<a name='Колонка-общий-трудовой-стаж-содержит-74---отрицательных-значений--А-также-максимальное-количество-дней-стажа-больше-400-тысяч-дней--это-больше-1000-лет-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В колонке общий трудовой стаж есть 10 % пропущенных значений.  \n- 90 % уникальных значений, это нормально, так как стаж в днях.  \n- 74 % отрицательных значений. Так быть не должно.   \nНужно выяснить как считаются дни стажа и разобраться откуда появляются отрицательные значения.  \n- Максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет. Явно это выброс.  \n- Данные совершенно некорректные, нужно разбираться что является причиной.  \n\n<a name='Только-5-процентов-клиентов-моложе-25-лет--Основная-часть-клиентов-старше-30-лет-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='В-колонке-возраста-101-нулевое-значение-'></a>\n\n**Наблюдения:**  \n\n- В колонке возраста нет пропущенных значений.  \n- 58 уникальных значений (<1%), похоже на правду.  \n- 101 нулевое значение. Это явно ошибки.  \n- Максимальный возраст 75 лет. Вполне реально.  \n- Медиана 42 года, первый квартиль 33 года, можно сделать вывод, что у нас в основном люди старше 30 лет.  \n- Больше всего людей около 40 лет.  \n- Только 5 процентов людей моложе 25 лет.  \n- Распределение похоже на нормальное. Так и должно быть.  \n\n<a name='Меньше-5---клиентов-имеют-зарплату-меньша-63-тысяч--Можно-сделать-вывод--что-большинство-имеет-высокий-доход'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Колонка-дохода-имеет-слишком-много-знаков-после-запятой-'></a>\n\n**Наблюдения:**  \n\n- В столбце дохода 10 процентов пропущенных значений.  \n- Есть дубликаты, но это нормально.  \n- Максимальный доход больше 2 млн, нужно проверить это, кажется что это нереально.  \n- Минимальная зарплата 20 тысяч, это похоже на истину.  \n- Распределение зарплат соответствует реальности.  \n- Меньше 5 % людей имеют зарплату меньше 63 тысяч.  \nМожно сделать вывод, что большинство имеет высокий доход.  \nПри этом 25 % имеют доход больше 200 тысяч.  \n- Слишком много знаков после запятой, нужно разобраться в чем дело\n\n<a name='В-колонке-с-образованием-присутствуют-одни-и-те-же-значения-с-разными-регистрами--При-этом-в-колонке-с-id-образования-все-в порядке-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- В колонке образование пропусков нет.  \n- Уникальных значений 15\n- Присутствуют явные дубли из за разных регистров слов.  \n- Больше всего людей со средним образованием 71 %\n- Высшее образование у 24 %\n\n**Наблюдения:**  \n\n- В колонке с id образования нет дублей, которые есть в колонке образования\n\n<a name='58---клиентов-либо-женаты--либо-замужем--19---в-гражданском-браке--Можно-сделать-вывод-что-большинство-в-браке-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В колонке семейного статуса пропусков нет\n- Проблем не обнаружено\n- 58 % либо женаты, либо замужем\n- 19 % в гражданском браке\n- Можно сделать вывод что большинство в браке.  \n\n**Наблюдения:**\n\n- Колонке семейный статус id проблем не обнаружено, значения совпадают со столбцом семейный статус\n\n<a name='Большинство-клиентов-женщины--66-процентов--'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- В возрасте пропусков нет\n- 3 уникальных значения\n- Значение XNA меньше чем у 1 %, возможно не указали пол\n- 66 % женщины, можно сделать вывод, что большинство женщины\n\n**Наблюдения:**\n\n- В столбце тип занятости 8 уникальных значений.  \n- Больше всего сотрудников (52 %)\n- 24 % компаньоны\n- 18 % пенсионеры\n- Меньше 1 % безработных.\n- Можно сделать вывод, что большинство либо пенсионеры, либо имеют занятость\n- Также меньше 1 % предприниматели.\n\n<a name='92---клиентов-не-имеют-долга-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В колонке наличия долга 2 значения.  \n- Пропусков нет\n- 92 % людей не имеют долга\n\n**Наблюдения:**\n\n- В колонке цель кредита пропусков нет  \n- 38 уникальных значений, немного, но все таки есть похожие цели, нужно будет объединить в одно значение\n- Ярко выраженной цели кредита нет, но сложно точно определить, нужно объединить сначала похожие цели.  \n\nДля дальнейшего анализа срауз приведем колонку education к нижнему регистру и удалим лишние пробелы\n\nПроверим на ошибки целостности  \nЕсли у нас есть столбцы, в которых значения должны совпадать попарно, то проверяем на это.\n\nНет проблем с целостностью в образовании, несмотря на дубли в образовании.\n\nВ семейном статусе также нет проблем с целостностью.  \n\n#### 1.2.2 Изучение дубликатов<a name='1-2-2-Изучение-дубликатов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПроверим на дубли\n\nПосмотрим на дубли во всем датафрейме\n\nУ нас 54 полных дубля в таблице. Посмотрим на них.\n\n**Наблюдения:**\n\n- Так как у нас нет уникального идентификатора клиентов, то дубли это нормально\n- Также у нас в строках с дублями есть пропуски в некоторых столбцах, если бы не было пропусков,  \nто возможно дублей было бы меньше, так как было бы больше детализации\n\nПосмотрим сколько у нас дублей в каждой колонке\n\nПосмотрим на дубликаты между парами колонок\n\n**Наблюдения:**\n\n- У нас большинство колонок имеют попранные дубликаты, это скорее всего вызвано пропусками\n- Если бы не было пропусков в колонках стажа и дохода, то дублей было бы меньше\n\n#### 1.2.3 Изучение пропусков<a name='1-2-3-Изучение-пропусков'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПроверяем на пропуски    \n\nУ нас пропуски в колонке со стажем и в колокне с доходом.  \nПосмотрим на строки датафрейма с пропусками.  \n\nКоличество пропусков совпадает с точностью до строки.  \nВыдвигаем гипотезу, что пропуски в обоих колонках в одних и тех же строках.\n\nПроверим эту гипотезу\n\nПосмотрим на стаж\n\n**Наблюдения:**\n\n- 10 случайно взятых строк подтверждают гипотезу\n\nПосмотрим на доход\n\n**Наблюдения:**\n\n- 10 случайно взятых строк подтверждают гипотезу\n\nПосмотрим сколько пропусков в обоих колонках вместе\n\n**Наблюдения:**\n\n- Видим, что совместно пропуски в таком количестве строк как и по отдельности.  \nГипотеза подтвердилась. У нас пропуски в строке стаж связаны с пропусками в строке доход.  \nВозможно это вызвано тем, что при расчете дохода используется стаж, либо существует другое влияние одного на другое.  \n\n#### 1.2.4 Изучение выбросов<a name='1-2-4-Изучение-выбросов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nСначала изучим потенциальные выбросы, которые мы выявили при изучении колонок.  \nУ нас в количестве детей есть значение 20.   \nИзучим его подробнее.  \n\nПосмотрим на строки датафрейма, где количество детей равно 20\n\n**Наблюдения:**\n\n- Значительная часть людей с 20 детьми находятся в браке.  \n\n**Наблюдения:**\n\n- Большая часть сотрудники\n- Пенсионеры имеют меньшую долю с 20 детьми чем в основном количестве.  \n\nУ нас в доходе странные максимальные значения нужно их изучить\n\n**Наблюдения:**\n\n- Ничего особенного не заметно, возможно это не выбросы.\n\nПосмотрим на выбросы через квантили\n\n**Наблюдения:**\n\n- интересно что количество выбросов, кроме колонки количество детей, примерно одинаковое\n\nИзучим выбросы в разрезе категорий\n\n**Наблюдения:**\n\n- Видим, что клиенты с количеством больше 2 попали в выбросы, что логично\n- Также -1 попало в выброс, что тоже верно\n\n**Наблюдения:**\n\n- женат / замужем содержит значительно больше выбросов, даже учитывая что в общем количестве их тоже больше\n\n**Наблюдения:**\n\n- У мужчин немного побольше выбросов, учитывая размер группы мужчин\n\n**Наблюдения:**\n\n- Больше всего выбросов у сотрудников, даже больше чем пропорция сотрудников в общем количестве\n\n**Наблюдения:**\n\n- У женщин выбросов в стаже намного больше чем у мужчин, даже учитывая что женщин больше всего\n\n**Наблюдения:**\n\n- У пенсионеров значительно больше выбросов в стаже\n\n**Наблюдения:**\n\n- У должников выбросов в стаже меньше, учитывая пропорции.\n\n**Наблюдения:**\n\n- В выбросы попали самые молодые и самые старые по возрасту, что логично, также попал 0\n\n**Наблюдения:**\n\n- Не женат / не замужем выделяется по выбросам, учитывая пропорцию в общем количестве\n\n**Наблюдения:**\n\n- У пенсионеров больше выбросов по возрасту, что логично\n\n**Наблюдения:**\n\n- У женатых больше выбросов по доходу\n\n**Наблюдения:**\n\n- У пенсионеров больше выбросов по доходу\n\n**Наблюдения:**\n\n- Без задолженности немного больше выбросов по доходу.  \n\n### 1.3 Промежуточный вывод<a name='1-3-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.  \nТак как у нас нет уникального идентификатора клиентов, то эти дубли не выглядят ошибкой.  \nТакже у нас в строках с дублями есть пропуски в некоторых столбцах, если бы не было пропусков,  \nто возможно дублей было бы меньше, так как было бы больше детализации\n- В столбце с количеством детей есть отрицательные значения.  47 штук. Меньше 1 процента. Также есть клиенты с 20 детьми. Что странно.  \nТакое количество детей в основном у людей в браке и сотрудников. У пенсионеров явно доля с 20 детьми меньше, чем доле пенсионеров в общем количестве людей.\n- Возможно 20 детей связано с тем, что во время ввода данных указали лишний ноль.  \nРекомендация, сделать проверку на отрицательные значения и на 20 детей, чтобы на стадии ввода не допускать ошибок.  \n- 66 процентов имеют 0 детей, 22 процента имеют 1 ребенка, 10 % имеют 2 детей и меньше 5 % имеют более 2 детей.  \n- В колонке общий трудовой стаж есть 10 % пропущенных значений.  \n- 74 % отрицательных значений. Так быть не должно.  \n- Максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет. Явно это выброс.  \n- Столбец со стажем выглядит некорректно. Нужно выяснить методику расчета и разобраться в чем проблема.  \n- В колонке возраста 101 нулевое значение. Это явно ошибки.  \n- Медиана 42 года, первый квартиль 33 года, можно сделать вывод, что у нас в основном люди старше 30 лет.  \n- Больше всего людей около 40 лет.  \n- Только 5 процентов людей моложе 25 лет.  \n- Колонка дохода имеет слишком много знаков после запятой. Нужно выяснить причину.  \n- Доход больше 1 млн может быть правдой. Тем более такой доход в большинстве у мужчин с высшим образованием, у компаньонов или сотрудников.  \nНет оснований считать это выбросом. Максимальный доход 2 млн. Также может быть реальным.\n- Меньше 5 % людей имеют зарплату меньше 63 тысяч.  \nМожно сделать вывод, что большинство имеет высокий доход.  \nПри этом 25 % имеют доход больше 200 тысяч.  \n- В колонке с образованием присутствуют одни и те же значения с разными регистрами. Нужно выяснить почему так происходит при загрузке.  \nПри этом в колонке с id образования все в порядке.    \n- Больше всего людей со средним образованием 71 %. Высшее образование у 24 %.\n- 58 % женаты либо замужем. 19 % в гражданском браке. Можно сделать вывод что большинство в браке.  \n- В колонке пола присутствует значение XNA меньше чем у 1 %, возможно не указали пол.\n- 66 % женщины, можно сделать вывод, что большинство женщины\n- В столбце занятость больше всего сотрудников (52 %). Меньше 1 % безработных. Предпринимателей также 1 %. Можно сделать вывод, что большинство либо пенсионеры, либо имеют занятость.\n- 92 % не имеют долга\n- В колонке цель кредита 38 уникальных значений, немного, но все таки есть похожие цели, нужно будет объединить в одно значение.\n- У нас пропуски в колонке со стажем и в колокне с доходом.  \n- Гипотеза, что пропуски в обоих колонках расположены в одних и тех же строках подтвердилась.  \nВозможно это вызвано тем, что при расчете дохода используется стаж, либо существует другое влияние одного на другое.  \n- Категория семейного статуса 'женат / замужем' содержит значительно больше выбросов по количеству детей, даже учитывая что в общем количестве их тоже больше\n- У мужчин немного побольше выбросов по количеству детей, учитывая размер группы мужчин.\n- Больше всего выбросов по количеству детей у категории занятости 'сотрудник'\n- У женщин выбросов в стаже намного больше чем у мужчин, даже учитывая что женщин больше всего\n- У пенсионеров значительно больше выбросов в стаже\n- Категория семейного статуса 'Не женат / не замужем' выделяется по выбросам, учитывая пропорцию в общем количестве.\n- У пенсионеров больше выбросов по возрасту, что логично\n- Категория семейного статуса 'Не женат / не замужем' имеет больше выбросов по доходу\n- У пенсионеров больше выбросов по доходу\n- У людей без задолженности немного больше выбросов по доходу.  \n\n## 2. Предобработка данных<a name='2--Предобработка-данных'></a>\n\n### 2.1 Выбор нужных столбцов для дальнейшей работы и нормализация таблицы<a name='2-1-Выбор-нужных-столбцов-для-дальнейшей-работы-и-нормализация-таблицы'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nДля дальнейшего анализа нам не нужно 2 колонки с образованием и с семейным статусом.   \nУдалим колонки с id образования и семейного статуса, так как нам для графиков лучше подойдут названия, а не id.\n\nТакже колонка days_employed имеет совершенно некорректные данные, нужно разбираться откуда такие данные.  \nВ данный момент мы ничего не можем с этим сделать и любые действия могут исказить результат. Поэтому не будем брать эту колонку.  \n\nСохраним исходный датафрейм в переменную df_origin, чтобы была возможность вернуться к нему\n\n### 2.2 Обработка выбросов<a name='2-2-Обработка-выбросов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим где у нас отрицательные значения\n\nУ нас 0.2% отрицательных значений, лучше всего будет их просто удалить.\n\nПосмотрим где у нас нулевые значения\n\nВ количестве детей 0 это нормально. С этим ничего делать не будем.  \nВ возрасте 0.5% нулевых значений. Лучше будет их удалить.\n\nУбедимся, что у нас нет нулевых и отрицательных значений там, где их быть не должно\n\nПосле изучения данных мы выяснили, что у нас есть странное значение в количестве детей, которое может быть выбросом.  \n\n\nУ нас таких данных меньше пол процента, удалим их, так как нет уверенности, что это не выбросы.  \nЕсли их оставить, то они могут внести больше искажений, чем их удалить.  \n\n### 2.3 Обработка пропусков<a name='2-3-Обработка-пропусков'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим, где у нас пропуски\n\nУ нас 10 процентов пропусков в доходе.  \nУдалять нельзя. Попробуем заменить.  \n\nВ доходе мы можем заполнить пропуски учитывая категории.  \nВыберем категории следующие - образование, семейный статус, пол, занятость.  \nВыбраны эти категории, так как они могут оказывать влияние на  доход.  \n\nПосмотрим размеры групп, если заменять внутри этих групп\n\n**Наблюдения:**\n\n- 86 % групп с пропусками имеют 10 и более элементов. По таким группам можем заполнить пропуски медианой\n- 3 % групп имеют только пропуски, таких 3 пропусков всего, их мы такими группами заполнить не сможем.  \n\nЗаполним пропуски в группах от 10 элементов\n\nОставшиеся пропуски попробуем заполнить без учета семейного статуса\n\nОставшиеся заменим по образованию и типу занятости\n\nОставшиеся заменим медианой по образованию\n\nПропусков не осталось, можно продолжать анализ.\n\n### 2.4 Обработка дубликатов<a name='2-4-Обработка-дубликатов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим снова на дубли после обработки пропусков\n\nУ нас нет столбцов, где дублей не должно быть и нет комбинаций столбцов, в которых не должно быть дублей.  \nПоэтому нет оснований обрабатывать дубли. Оставим как есть.\n\n### 2.5 Приведение данных к удобной форме<a name='2-5-Приведение-данных-к-удобной-форме'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nОкруглим значения в поле дохода до целого.  \nЦелая часть выглядит реальной. А с дробной частью нужно разбираться почему столько знаков.  \n\nПосмотрим сколько у нас людей с полом XNA осталось\n\nПосмотрим кто это\n\nВсего 1 человек. И мы не можем идентифицировать его пол.  \nУдалим, чтобы не мешало анализировать графики.  \n\n### 2.6 Категоризация данных<a name='2-6-Категоризация-данных'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nСделаем дополнительную колонку, в которой будет указано есть дети или нет\n\nСоздадим дополнительную категориальную переменную из возраста, для удобства анализа.  \n\nСделаем следующие группы\n- до 30 лет\n- от 30 до 40 лет\n- от 40 до 50 лет\n- от 50 до 60 лет\n- старше 60 лет\n\nСоздадим категориальную переменную по доходу\n\nСделаем следующие категории\n- до 50 тыс\n-  от 50 до 100 тыс\n- от 100 до 200 тыс\n-  от 200 до 500 тыс\n- от 500 тыс и выше\n\nСделаем категории из колонки целей кредита используя лемматизацию\n\nУдалим старую цель кредита\n\n### 2.7 Промежуточный вывод<a name='2-7-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- Удалили колонки с id образования и семейного статуса, так как нам для графиков лучше подойдут названия, а не id.\n- Колонка со стажем имеет совершенно некорректные данные. Чтобы не внести искажение в анализ, удалим эту колонку.\n- Удалили отрицательные значения в колонке с количеством детей, которые составляли 0,2% от общего количества записей в данных.\n- Удалили нулевые значения в колонке с возрастом, которые составляли 0,5% от общего количества записей в данных.\n- Удалили записи, где количество детей равно 20, которые составляли 0,35% от общего количества записей в данных.\n- Заполнили пропуски в столбце с доходом медианным значением, учитывая категории образование, семейный статус, пол, занятость.\n- Округлили значения дохода до целого.\n- Удалили 1 запись, где пол равен XNA\n- Создали дополнительную бинарную колонку, указывающую на наличие детей (1 - есть дети, 0 - нет детей).\n- Сделали дополнительную колонку с возрастными категориями.  \n- Сделали дополнительную колонку с категориями дохода.  \n- Тематизировали колонку с целью кредита, чтобы получить категории целей кредита.  \n\n## 3. Анализ корреляций между переменными<a name='3--Анализ-корреляций-между-переменными'></a>\n\n### 3.1 Исследование корреляционных связей<a name='3-1-Исследование-корреляционных-связей'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим на корреляцию между колонками\n\n**Наблюдения:**\n\n- Корреляции не обнаружено\n\nПосмотрим какие переменные сильнее других влияют на предсказание долга с помощью модели случайного леса\n\n<a name='Доход-является-самым-значимым-признаком-для-предсказания-задолженности-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Видим, что доход значительно превышает стаж и количество детей.  \n\n### 3.2 Промежуточный вывод<a name='3-2-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- Корреляций между переменными не обнаружено.\n- Доход является самым значимым признаком для предсказания задолженности.\n\n## 4. Визуализация взаимосвязей переменных<a name='4--Анализ-взаимосвязей-переменных-на-графиках'></a>\n\n### 4.1 Изучение зависимостей между числовыми переменными<a name='4-1-Изучение-зависимостей-между-числовыми-переменными'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим на зависимости между числовыми переменными.   \n<a name='Чем-меньше-количество-детей--тем-больше-значений-с-высоким-доходом-'></a>\n\n**Наблюдения:**\n\n- Можно заметить, что чем меньше количество детей, тем больше значений с высоким доходом.\n- Также можно заметить, что чем моложе клиент, тем в среднем у него больше детей.\n\n### 4.2 Изучение зависимостей между категориальными переменными<a name='4-2-Изучение-зависимостей-между-категориальными-переменными'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим на распределение количества элементов между группами\n\n**Наблюдения:**\n\n- В каждой категории семейного положения доля женщин больше.\n\n**Наблюдения:**\n\n- Среди семейного статуса и занятости больше всего женатых сотрудников\n\n<a name='Нет-явной-зависимости-семейного-положения-и-задолженности-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Нет явной зависимости семейного положения и задолженности.\n- Не женатые и люди в гражданском браке чаще других имеют задолженность, но всего лишь на пару процентов долей.  \n- Женатых без долго явно больше остальных.\n\n**Наблюдения:**\n\n- Женатых без детей больше всего\n\n**Наблюдения:**\n\n- Возрастная группа 30-40 лет выделяется среди женатых\n\n<a name='Большая-часть-женатых-имеет-доход-100-200-тыс'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Большая часть женатых имеет доход 100-200 тыс\n\n<a name='Больше-всего-кредит-берут-на-цели--связанные-с-недвижимостью--кроме-людей-в-гражданском-браке'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Люди-в-гражданском-браке-чаще-берут-кредит-на-свадьбу'></a>\n\n**Наблюдения:**\n\n- Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке\n\n- Люди в гражданском браке чаще берут кредит на свадьбу\n\n**Наблюдения:**\n\n- Больше всего женщин сотрудников\n\n<a name='Женщины-чаще-возвращают-кредит--чем-мужчины-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Женщины чаще возвращают кредит. Это видно из пропорций.\n\n<a name='Люди-старше-60-лет-реже-других-имеют-долги'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Люди старше 60 лет реже других имеют долги (вкладка сравнение задолженность).\n\n<a name='Долги-присутствуют-у-людей-с-разным-доходом-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Долги есть у людей с разным доходом\n\n<a name='Кредиты-оформленные-на-цели-связанные-с-недвижимостью-реже-других-приводят-к-долгам'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\nНаблюдения:\n- Кредиты, оформленные на цели, связанные с недвижимостью, реже других приводят к долгам.\n\n**Наблюдения:**\n\n- Можно заметить, что категория возраста от 30 до 40 лет имеет больше зарплату\n\nПосмотрим на распределение количества людей по категориям на сэнки диаграмме\n\n### 4.3 Изучение зависимостей между числовыми и категориальными переменными<a name='4-3-Изучение-зависимостей-между-числовыми-и-категориальными-переменными'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  У мужчин средний доход выше\n\n<a name='На-всех-уровнях-образования--кроме-ученой-степени--доход-у-мужчин-выше-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  На всех уровнях образования, кроме ученой степени, доход у мужчин выше.\n\n<a name='Цель-получения-кредита-практически-не-зависит-от-среднего-ежемесячного-дохода-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  Цель получения кредита практически не зависит от среднего ежемесячного доход\n\n<a name='У-мужчин--которые-в-браке-или-были-в-браке--количество-детей-больше--чем-у-женщин-в-той-же-категории-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- У мужчин, которые в браке или были в браке, количество детей больше, чем у мужчин, женщин в той же категории\n- У женатых детей больше, что логично\n\n**Наблюдения:**\n\n-  Средний доход по семейному статусу примерно одинаковый, у вдовцов немного пониже\n\n**Наблюдения:**\n\n-  Медианный доход предпринимателей больше, чем у других.\n\n<a name='У-должников-в-среднем-больше-детей--В-частности--среди-должников-женщины-имеют-больше-детей-в-среднем--чем-мужчины--а-среди-не-должников-мужчины-имеют-больше-детей-в-среднем--чем-женщины'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- У должников в среднем больше детей. В частности, среди должников женщины имеют больше детей в среднем, чем мужчины, а среди не должников мужчины имеют больше детей в среднем, чем женщины\n\n<a name='У-должников-средний-возраст-немного-ниже-для-всех-категорий-семейного-положения-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  У должников средний возраст немного ниже\n\n**Наблюдения:**\n\n-  В разрезе семейного положения ситуация сохраняться, возраст немного меньше у должников\n\n<a name='Медианный-доход-у-должников-и-не-должников-практически-не-отличается'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  Медианный доход у должников и не должников практически не  отличается\n\n**Наблюдения:**\n\n- Среднее количество детей у группы 30-40 лет больше.\n- До 40 лет детей больше у женщин, старше 40 лет детей больше у мужчин\n\n**Наблюдения:**\n\n- Предприниматели до 30 лет имеют значительно болье средний доход, но в этой группе всего один клиент.\n- Странно, что в группе 40-50 лет безработные имеют доход сравнимый с другими группами, а в других возрастных категориях - нет.\n\n**Наблюдения:**\n\n- С доходом до 100 тысяч детей больше у женщин, а с доходом выше 100 тысяч - у мужчин.\n\n**Наблюдения:**\n\n- У женщин средний возраст выше, кроме категории ученая степень\n- У мужчин с ученой степенью средний возраст выше, чем у женщин, но размер группы 'ученая степень' маленький, поэтому утверждать нельзя.\n\n**Наблюдения:**\n\n- Средний возраст распределен логично, можно отметить, что госслужащие имеют средний возраст больше 40 лет\n\n**Наблюдения:**\n\n- Средний доход предпринимателей значительно выше других, но как видно предприниматель только 1, поэтому это нерепрезентативно.\n- В декрете и студент имеют самый низкий доход, но размеры групп маленькие, поэтому также нет уверенности в выводе.\n\n<a name='Должники-имеют-ниже-средний-возраст-как-мужчины-так-и-женщины--Ситуация-сохраняется-во-всех-группах-дохода-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Должники имеют ниже средний возраст как мужчины так и женщины.\n\n<a name='Люди-от-30-до-50-лет-имеют-самый-высокий-средний-доход-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Люди от 30 до 50 лет имеют самый высокий средний доход.\n\n**Наблюдения:**\n\n-  Во всех группах дохода, кроме 'больше 500 тыс' среднее количество детей у должников больше\n\n**Наблюдения:**\n\n-  Во всех группах дохода средний возраст должников ниже\n\n**Наблюдения:**\n\n-  Возрастная категория '30-40' лет имеет больше детей во всех категориях дохода\n\n**Наблюдения:**\n\n-  Для всех значений в семейном статусе, у людей без детей средний возраст выше.\n\n**Наблюдения:**\n\n-  Средний возраст у людей без детей выше примерно на 9 лет\n\n### 4.4 Промежуточный вывод<a name='4-4-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- Можно заметить, что чем меньше количество детей, тем больше значений с высоким доходом.\n- Среди семейного статуса и занятости больше всего женатых сотрудников\n- Женатых без долго явно больше остальных.\n- Большая часть женатых имеет доход 100-200 тыс\n- Женщины чаще возвращают кредит.\n- Долги есть у людей с разным доходом.\n- На всех уровнях образования, кроме ученой степени, доход у мужчин выше.\n- Цель получения кредита практически не зависит от среднего ежемесячного дохода.\n- У мужчин, которые в браке или были в браке, количество детей больше, чем у женщин в той же категории\n- Средний доход по семейному статусу примерно одинаковый, у вдовцов немного пониже\n- У должников в среднем больше детей\n- У должников среднее количество детей больше у женщин, а у не должников среднее количество детей больше у мужчин\n- У должников средний возраст немного ниже для всех категорий семейного положения.\n- Медианный доход у должников и не должников практически не отличается\n- Среднее количество детей у группы 30-40 лет больше.\n- До 40 лет детей больше у женщин, старше 40 лет детей больше у мужчин\n- В группе 40-50 лет безработные имеют доход сравнимый с другими группами, а в других возрастных категориях доход безработных значительно ниже.\n- С доходом до 100 тысяч детей больше у женщин, а с доходом выше 100 тысяч - у мужчин.\n- У женщин средний возраст выше, кроме категории ученая степень\n- Должники имеют ниже средний возраст как мужчины так и женщины. Ситуация сохраняется во всех группах дохода.\n- Люди от 30 до 50 лет имеют самый высокий средний доход.\n- Во всех группах дохода, кроме 'больше 500 тыс' среднее количество детей больше\n- Возрастная категория '30-40' лет имеет больше детей во всех категориях дохода\n- Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке\n- Люди в гражданском браке чаще берут кредит на свадьбу\n\n\n## 5. Формулирование и провера гипотез<a name='5--Формулирование-и-провера-гипотез'></a>\n\n### 5.1 Формулирование гипотез<a name='5-1-Формулирование-гипотез'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nНа основе проведенного анализа данных сформулируем следующие гипотезы:\n\nГипотеза 1: Нет зависимость между наличием детей и возвратом кредита в срок.  \nГипотеза 2: У мужчин средний доход выше  \nГипотеза 3: Цель получения кредита не зависит от еза 3: Цель получения кредита не зависит от среднего ежемесячного доход  \nГипотеза 4: Средний доход по семейному статусу одинаковый, но у вдовцов отличается  \nГипотеза 5: У должников в среднем больше детей   \nГипотеза 6: У должников средний возраст ниже  \nГипотеза 7: Медианный доход у должников и не должников не  отличается  \n\n### 5.2 Проверка гипотез<a name='5-2-Проверка-гипотез'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПроверим сформулированные гипотезы.\n\n**Гипотеза 1: Нет зависимость между наличием детей и возвратом кредита в срок**\n\nH0: Наличие детей не влияет на возврат кредита в срок.  \nH1: Наличие детей влияет на возврат кредита в срок.\n\nТак как у нас обе переменных категориальные, то воспользуемся критерием хи-квадрат Пирсона.  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что наличие детей не влияет на возврат кредита в срок не подтвердилась.\n\n**Гипотеза 2: У мужчин средний доход выше**\n\nH0: У мужчин средний доход не выше, чем у женщин  \nH1: У мужчин средний доход выше, чем у женщин\n\nпосмотрим на распределение\n\nУ нас значительные выбросы в доходе нужно использовать непараметрический тест\n\nИспользуем критерий Манна-Уитни  \nАльтернатива будет - больше  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что у мужчин средний доход выше, чем у женщин подтвердилась\n\n**Гипотеза 3: Цель получения кредита не зависит от среднего ежемесячного доход**\n\nH0: Средний ежемесячный доход не различается между группами цели получения кредита.   \nH1: Средний ежемесячный доход различается между группами цели получения кредита.\n\nИспользуем критерий Краскела-Уоллиса  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 у нас нет оснований отвергнуть гипотезу, что цель получения кредита практически не зависит от среднего ежемесяченого доход\n\n**Гипотеза 4: Средний доход по семейному статусу одинаковый, но у вдовцов отличается**\n\nH0: Средний ежемесячный доход не различается между группами по семейному статусу  \nH1: Средний ежемесячный доход различается между группами по семейному статусу\n\nИспользуем критерий Краскела-Уоллиса  \nУровень значимости alpha выберем 0.05\n\nИспользуем тест Тьюки, чтобы определить различия между группами  \nУровень значимости alpha выберем 0.05\n\nВидим, что гипотеза отвергается в парах где есть вдова / вдовец\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что средний доход по семейному статусу примерно одинаковый, но у вдовцов отличается подтвердилась.\n\n**Гипотеза 5: У должников в среднем больше детей**\n\nH0: У должников и не должников в среднем одинаковое количество детей.  \nH1: У должников в среднем больше детей, чем у не должников.\n\nПосмотрим на распределение количества детей\n\nТак как у нас дискретное распределение, то будем использовать критерий Манна-Уитни    \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что у должников в среднем больше детей подтвердилась.\n\n**Гипотеза 6: У должников средний возраст ниже**\n\nH0: У должников и не должников одинаковый средний возраст  \nH1: У должников средний возраст ниже, чем у не должников.\n\nПосмотрим на распределение возраста\n\nПроверим гипотезу, что дисперсии в группах не отличаются\n\nH0: У должников и не должников дисперсия не отличается  \nH1: У должников и не должников дисперсия отличается\n\nИспользуем тест Левена\n\nТак как дисперсия в группах разная, будем использовать тест Уэлча.  \nУровень значимости alpha выберем 0.05\n\nПостроим доверительный интервал\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что у должников средний возраст ниже подтвердилась.  \n95 % доверительный интервал для разницы средних возрастов для должников и не должников равен (-inf, -2.74)\n\n**Гипотеза 7: Медианный доход у должников и не должников не  отличается**\n\nH0: Медианный доход у должников и не должников не отличается  \nH1: Медианный доход у должников и не должников отличается\n\nИспользуем бутстреп для проверке гипотезы  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 нет оснований отвергнуть гипотезу. что медианный доход у должников и не должников не отличается.  \n95 % доверительный интервал разницы между медианным доходом должников и не должников равен (-2648.05, 179.34)\n\n### 5.3 Промежуточный вывод<a name='5-3-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- На уровне значимости 0.05 гипотеза, что у мужчин средний доход выше, чем у женщин подтвердилась\n- На уровне значимости 0.05 у нас нет оснований отвергнуть гипотезу, что цель получения кредита практически не зависит от среднего ежемесяченого доход\n- На уровне значимости 0.05 гипотеза, что средний доход по семейному статусу примерно одинаковый, но у вдовцов отличается подтвердилась.\n- На уровне значимости 0.05 гипотеза, что у должников в среднем больше детей подтвердилась.\n- На уровне значимости 0.05 гипотеза, что у должников средний возраст ниже подтвердилась.  \n95 % доверительный интервал для разницы средних возрастов для должников и не должников равен (-inf, -2.74)\n- На уровне значимости 0.05 нет оснований отвергнуть гипотезу. что медианный доход у должников и не должников не отличается.  \n95 % доверительный интервал разницы между медианным доходом должников и не должников равен (-2648.05, 179.34)\n- На уровне значимости 0.05 гипотеза, что наличие детей не влияет на возврат кредита в срок не подтвердилась.\n\n## 6. Общий вывод<a name='6--Общий-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n**Выводы:**\n\n- Нет явной зависимости семейного положения и задолженности.\n- У должников в среднем больше детей. В частности, среди должников женщины имеют больше детей в среднем, чем мужчины, а среди не должников мужчины имеют больше детей в среднем, чем женщины.\n- Женщины чаще возвращают кредит, чем мужчины.\n- Долги присутствуют у людей с разным доходом.\n- Люди старше 60 лет реже других имеют долги.\n- Кредиты, оформленные на цели, связанные с недвижимостью, реже других приводят к долгам.\n- У должников средний возраст немного ниже для всех категорий семейного положения.\n- Медианный доход у должников и не должников практически не отличается.\n- Должники имеют ниже средний возраст как мужчины так и женщины. Ситуация сохраняется во всех группах дохода.\n- Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке.\n- Люди в гражданском браке чаще берут кредит на свадьбу.\n- Доход является самым значимым признаком для предсказания задолженности.\n- Люди от 30 до 50 лет имеют самый высокий средний доход.\n- Только 5 процентов клиентов моложе 25 лет. Основная часть клиентов старше 30 лет.\n- Меньше 5 % клиентов имеют зарплату меньше 63 тысяч. При этом 25 % имеют доход больше 200 тысяч.\n- 58 % клиентов либо женаты, либо замужем. 19 % в гражданском браке. Можно сделать вывод что большинство в браке.\n- Большинство клиентов женщины (66 процентов).\n- 92 % клиентов не имеют долга.\n- Чем меньше количество детей, тем больше значений с высоким доходом.\n- Большая часть женатых имеет доход 100-200 тыс.\n- На всех уровнях образования, кроме ученой степени, доход у мужчин выше.\n- Цель получения кредита практически не зависит от среднего ежемесячного дохода.\n- У мужчин, которые в браке или были в браке, количество детей больше, чем у женщин в той же категории.\n\n**Аномалии и особенности в данных:**\n\n- В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.  \n- В столбце с количеством детей есть отрицательные значения. 47 штук. Меньше 1 процента от всего датафрейма. Также есть клиенты с 20 детьми.\n- Колонка общий трудовой стаж содержит 74 % отрицательных значений. А также максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет.\n- В колонке возраста 101 нулевое значение.\n- Колонка дохода имеет слишком много знаков после запятой.\n- В колонке с образованием присутствуют одни и те же значения с разными регистрами. При этом в колонке с id образования все в порядке.   \n\n**Результаты предобработки данных:**\n\n- Удалили колонки с id образования и семейного статуса, так как нам для графиков лучше подойдут названия, а не id.\n- Колонка со стажем имеет совершенно некорректные данные. Чтобы не внести искажение в анализ, удалим эту колонку.\n- Удалили отрицательные значения в колонке с количеством детей, которые составляли 0,2% от общего количества записей в данных.\n- Удалили нулевые значения в колонке с возрастом, которые составляли 0,5% от общего количества записей в данных.\n- Удалили записи, где количество детей равно 20, которые составляли 0,35% от общего количества записей в данных.\n- Заполнили пропуски в столбце с доходом медианным значением, учитывая категории образование, семейный статус, пол, занятость.\n- Округлили значения дохода до целого.\n- Удалили 1 запись, где пол равен XNA\n- Создали дополнительную бинарную колонку, указывающую на наличие детей (1 - есть дети, 0 - нет детей).\n- Сделали дополнительную колонку с возрастными категориями.  \n- Сделали дополнительную колонку с категориями дохода.  \n- Лематизировали колонку с целью кредита, чтобы получить категории целей кредита.  \n\n**Результаты проверки гипотез:**  \n\n- Гипотеза 1: У мужчин средний доход выше, чем у женщин  \n **Результат:**   На уровне значимости 0.05 гипотеза подтвердилась.\n- Гипотеза 2: Цель получения кредита практически не зависит от среднего ежемесячного дохода  \n **Результат:** На уровне значимости 0.05 у нас нет оснований отвергнуть гипотезу.\n- Гипотеза 3: Средний доход по семейному статусу примерно одинаковый, но у вдовцов отличается  \n **Результат:** На уровне значимости 0.05 гипотеза подтвердилась.\n- Гипотеза 4: У должников в среднем больше детей  \n **Результат:** На уровне значимости 0.05 гипотеза подтвердилась.   \n- Гипотеза 5: У должников средний возраст ниже  \n **Результат:** На уровне значимости 0.05 гипотеза подтвердилась. 95% доверительный интервал для разницы средних возрастов для должников и не должников равен (-inf, -2.74).  \n- Гипотеза 6: Медианный доход у должников и не должников не отличается  \n **Результат:** На уровне значимости 0.05 нет оснований отвергнуть гипотезу. 95% доверительный интервал разницы между медианным доходом должников и не должников равен (-2648.05, 179.34).  \n- Гипотеза 7: Наличие детей не влияет на возврат кредита в срок  \n **Результат:** На уровне значимости 0.05 гипотеза не подтвердилась.\n\n**Рекомендации:**\n\n- Добавить контроль данных, чтобы не дублировались значения с разными регистрами в колонке с образованием.\n- Добавить уникальный идентификатор клиента, чтобы избежать дублирования строк.\n- Добавить проверку на отрицательные значения и на слишком большие значения в количестве детей при загрузке данных.\n- Выяснить откуда возникают отрицательные значения в трудовом стаже и добавить контроль ввода невалидных данных.\n- Выяснить причину нулевых значений в колонке возраста и добавить проверку на нулевые значения при загрузке данных.\n- Выяснить причину большого количества знаков после запятой в колонке дохода.\n","srcMarkdownNoYaml":"\n\n\n\n\n\n\n\n\n\n**Автор:**  \nГригорьев Павел   \n\n\n**Описание проекта:**   \nЗаказчик - кредитный отдел банка.  \nНужно разобраться, влияет ли семейное положение и количество детей клиента на факт погашения кредита в срок.  \nВходные данные от банка - статистика о платёжеспособности клиентов.    \nРезультаты исследования будут учтены при построении модели кредитного скоринга - специальной системы, которая оценивает способность потенциального заёмщика вернуть кредит банку.  \n\n\n**Цель:**   \nСоставить рекомендации для кредитного отдела банка, которые будут учтены при построении модели кредитного скоринга.  \nОпределить влияет ли семейное положение и количество детей клиента на факт погашения кредита в срок.  \n\n**Источники данных:**   \nСтатистика о платёжеспособности клиентов.\n\n**Главные выводы:**<a name=\"ref-to-conclusions\"></a><a name=\"ref-to-toc\"></a>\n\n- <a href='#Нет-явной-зависимости-семейного-положения-и-задолженности-'>Нет явной зависимости семейного положения и задолженности.</a>  \n- <a href='#У-должников-в-среднем-больше-детей--В-частности--среди-должников-женщины-имеют-больше-детей-в-среднем--чем-мужчины--а-среди-не-должников-мужчины-имеют-больше-детей-в-среднем--чем-женщины'>У должников в среднем больше детей. В частности, среди должников женщины имеют больше детей в среднем, чем мужчины, а среди не должников мужчины имеют больше детей в среднем, чем женщины</a>  \n- <a href='#Женщины-чаще-возвращают-кредит--чем-мужчины-'>Женщины чаще возвращают кредит, чем мужчины.</a>  \n- <a href='#Долги-присутствуют-у-людей-с-разным-доходом-'>Долги присутствуют у людей с разным доходом.</a>  \n- <a href='#Люди-старше-60-лет-реже-других-имеют-долги'>Люди старше 60 лет реже других имеют долги.</a>  \n- <a href='#Кредиты-оформленные-на-цели-связанные-с-недвижимостью-реже-других-приводят-к-долгам'>Кредиты, оформленные на цели, связанные с недвижимостью, реже других приводят к долгам.</a>  \n- <a href='#У-должников-средний-возраст-немного-ниже-для-всех-категорий-семейного-положения-'>У должников средний возраст немного ниже для всех категорий семейного положения.</a>  \n- <a href='#Медианный-доход-у-должников-и-не-должников-практически-не-отличается'>Медианный доход у должников и не должников практически не отличается</a>  \n- <a href='#Должники-имеют-ниже-средний-возраст-как-мужчины-так-и-женщины--Ситуация-сохраняется-во-всех-группах-дохода-'>Должники имеют ниже средний возраст как мужчины так и женщины. Ситуация сохраняется во всех группах дохода.</a>  \n- <a href='#Больше-всего-кредит-берут-на-цели--связанные-с-недвижимостью--кроме-людей-в-гражданском-браке'>Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке</a>  \n- <a href='#Люди-в-гражданском-браке-чаще-берут-кредит-на-свадьбу'>Люди в гражданском браке чаще берут кредит на свадьбу</a>  \n- <a href='#Доход-является-самым-значимым-признаком-для-предсказания-задолженности-'>Доход является самым значимым признаком для предсказания задолженности.</a>  \n- <a href='#Люди-от-30-до-50-лет-имеют-самый-высокий-средний-доход-'>Люди от 30 до 50 лет имеют самый высокий средний доход.</a>  \n- <a href='#Только-5-процентов-клиентов-моложе-25-лет--Основная-часть-клиентов-старше-30-лет-'>Только 5 процентов клиентов моложе 25 лет. Основная часть клиентов старше 30 лет.</a>  \n- <a href='#Меньше-5---клиентов-имеют-зарплату-меньша-63-тысяч--Можно-сделать-вывод--что-большинство-имеет-высокий-доход'>Меньше 5 % клиентов имеют зарплату меньша 63 тысяч. При этом 25 % имеют доход больше 200 тысяч.</a>  \n- <a href='#58---клиентов-либо-женаты--либо-замужем--19---в-гражданском-браке--Можно-сделать-вывод-что-большинство-в-браке-'>58 % клиентов либо женаты, либо замужем. 19 % в гражданском браке. Можно сделать вывод что большинство в браке.</a>  \n- <a href='#Большинство-клиентов-женщины--66-процентов--'>Большинство клиентов женщины (66 процентов).</a>  \n- <a href='#92---клиентов-не-имеют-долга-'>92 % клиентов не имеют долга.</a>  \n- <a href='#Чем-меньше-количество-детей--тем-больше-значений-с-высоким-доходом-'>Чем меньше количество детей, тем больше значений с высоким доходом.</a>  \n- <a href='#Большая-часть-женатых-имеет-доход-100-200-тыс'>Большая часть женатых имеет доход 100-200 тыс</a>  \n- <a href='#На-всех-уровнях-образования--кроме-ученой-степени--доход-у-мужчин-выше-'>На всех уровнях образования, кроме ученой степени, доход у мужчин выше.</a>  \n- <a href='#Цель-получения-кредита-практически-не-зависит-от-среднего-ежемесячного-дохода-'>Цель получения кредита практически не зависит от среднего ежемесячного дохода.</a>  \n- <a href='#У-мужчин--которые-в-браке-или-были-в-браке--количество-детей-больше--чем-у-женщин-в-той-же-категории-'>У мужчин, которые в браке или были в браке, количество детей больше, чем у женщин в той же категории.</a>  \n\n\n**Аномалии и особенности в данных:**<a name=\"ref-to-anomalies\"></a>\n\n- <a href='#В-датафрейме-есть-строки-дубликаты--54-строки--Меньше-1---от-всего-датафрейма-'>В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.</a>  \n- <a href='#В-столбце-с-количеством-детей-есть-отрицательные-значения--47-штук--Меньше-1-процента-от-всего-датафрейма--Также-есть-клиенты-с-20-детьми-'>В столбце с количеством детей есть отрицательные значения. 47 штук. Меньше 1 процента от всего датафрейма. Также есть клиенты с 20 детьми.</a>  \n- <a href='#Колонка-общий-трудовой-стаж-содержит-74---отрицательных-значений--А-также-максимальное-количество-дней-стажа-больше-400-тысяч-дней--это-больше-1000-лет-'>Колонка общий трудовой стаж содержит 74 % отрицательных значений. А также максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет.</a>  \n- <a href='#В-колонке-возраста-101-нулевое-значение-'>В колонке возраста 101 нулевое значение.</a>  \n- <a href='#Колонка-дохода-имеет-слишком-много-знаков-после-запятой-'>Колонка дохода имеет слишком много знаков после запятой.</a>  \n- <a href='#В-колонке-с-образованием-присутствуют-одни-и-те-же-значения-с-разными-регистрами--При-этом-в-колонке-с-id-образования-все-в порядке-'>В колонке с образованием присутствуют одни и те же значения с разными регистрами. При этом в колонке с id образования все в порядке.</a>  \n\n\n**Рекомендации:**\n\n- Добавить контроль данных, чтобы не дублировались значения с разными регистрами в колонке с образованием.\n- Добавить уникальный идентификатор клиента, чтобы избежать дублирования строк.\n- Добавить проверку на отрицательные значения и на слишком большие значения в количестве детей при загрузке данных.\n- Выяснить откуда возникают отрицательные значения в трудовом стаже и добавить контроль ввода невалидных данных.\n- Выяснить причину нулевых значений в колонке возраста и добавить проверку на нулевые значения при загрузке данных.\n- Выяснить причину большого количества знаков после запятой в колонке дохода.\n\n## Загрузка библиотек <skip>\n\n## 1. Описание и изучение данных<a name='1--Описание-и-изучение-данных'></a>\n\n### 1.1 Описание данных<a name='1-1-Описание-данных'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- children - количество детей в семье\n- days_employed - общий трудовой стаж в днях\n- dob_years - возраст клиента в годах\n- education - уровень образования клиента\n- education_id - идентификатор уровня образования\n- family_status - семейное положение\n- family_status_id - идентификатор семейного положения\n- gender - пол клиента\n- income_type - тип занятости\n- debt - имел ли задолженность по возврату кредитов\n- total_income - ежемесячный доход\n- purpose - цель получения кредита\n\n### 1.2 Изучение данных<a name='1-2-Изучение-данных'></a>\n\n#### 1.2.1 Изучение переменных<a name='1-2-1-Изучение-переменных'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nИзменим название колонки dob_years на более понятное age\n\nИзменим значения в столбце debt на 'есть', 'нет'\n\nИзучим отдельно каждую колонку\n\n<a name='В-датафрейме-есть-строки-дубликаты--54-строки--Меньше-1---от-всего-датафрейма-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.  \n\nЕсли заменить все пробелы на 1, привести к нижнему регистру, то дополнительно появляется 31 дубликат.  \n\nНужно детальнее изучить дубликаты.  \n\n<a name='В-столбце-с-количеством-детей-есть-отрицательные-значения--47-штук--Меньше-1-процента-от-всего-датафрейма--Также-есть-клиенты-с-20-детьми-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В столбце с количеством детей нет пропущенных значений.  \n- Уникальных всего 8 значений. Это нормально. Количество детей не может сильно варьироваться.\n- Наличие нулей нормально, это люди без детей, таких 66 %.  \n- Есть отрицательные значения.  47 штук. Меньше 1 процента. Это явно ошибка. В реальных данных таких не должно быть.   \nНужно выяснить почему появились отрицательное количество детей.  \n- Максимальное количество детей 20. Это скорее всего ошибка.\n- 66 процентов имеют 0 детей, 22 процента имеют 1 ребенка, 10 % имеют 2 детей и меньше 5 % имеют более 2 детей.  \n- Распределение детей соответствует реальности, больше всего людей без детей.\n\n\n<a name='Колонка-общий-трудовой-стаж-содержит-74---отрицательных-значений--А-также-максимальное-количество-дней-стажа-больше-400-тысяч-дней--это-больше-1000-лет-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В колонке общий трудовой стаж есть 10 % пропущенных значений.  \n- 90 % уникальных значений, это нормально, так как стаж в днях.  \n- 74 % отрицательных значений. Так быть не должно.   \nНужно выяснить как считаются дни стажа и разобраться откуда появляются отрицательные значения.  \n- Максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет. Явно это выброс.  \n- Данные совершенно некорректные, нужно разбираться что является причиной.  \n\n<a name='Только-5-процентов-клиентов-моложе-25-лет--Основная-часть-клиентов-старше-30-лет-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='В-колонке-возраста-101-нулевое-значение-'></a>\n\n**Наблюдения:**  \n\n- В колонке возраста нет пропущенных значений.  \n- 58 уникальных значений (<1%), похоже на правду.  \n- 101 нулевое значение. Это явно ошибки.  \n- Максимальный возраст 75 лет. Вполне реально.  \n- Медиана 42 года, первый квартиль 33 года, можно сделать вывод, что у нас в основном люди старше 30 лет.  \n- Больше всего людей около 40 лет.  \n- Только 5 процентов людей моложе 25 лет.  \n- Распределение похоже на нормальное. Так и должно быть.  \n\n<a name='Меньше-5---клиентов-имеют-зарплату-меньша-63-тысяч--Можно-сделать-вывод--что-большинство-имеет-высокий-доход'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Колонка-дохода-имеет-слишком-много-знаков-после-запятой-'></a>\n\n**Наблюдения:**  \n\n- В столбце дохода 10 процентов пропущенных значений.  \n- Есть дубликаты, но это нормально.  \n- Максимальный доход больше 2 млн, нужно проверить это, кажется что это нереально.  \n- Минимальная зарплата 20 тысяч, это похоже на истину.  \n- Распределение зарплат соответствует реальности.  \n- Меньше 5 % людей имеют зарплату меньше 63 тысяч.  \nМожно сделать вывод, что большинство имеет высокий доход.  \nПри этом 25 % имеют доход больше 200 тысяч.  \n- Слишком много знаков после запятой, нужно разобраться в чем дело\n\n<a name='В-колонке-с-образованием-присутствуют-одни-и-те-же-значения-с-разными-регистрами--При-этом-в-колонке-с-id-образования-все-в порядке-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- В колонке образование пропусков нет.  \n- Уникальных значений 15\n- Присутствуют явные дубли из за разных регистров слов.  \n- Больше всего людей со средним образованием 71 %\n- Высшее образование у 24 %\n\n**Наблюдения:**  \n\n- В колонке с id образования нет дублей, которые есть в колонке образования\n\n<a name='58---клиентов-либо-женаты--либо-замужем--19---в-гражданском-браке--Можно-сделать-вывод-что-большинство-в-браке-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В колонке семейного статуса пропусков нет\n- Проблем не обнаружено\n- 58 % либо женаты, либо замужем\n- 19 % в гражданском браке\n- Можно сделать вывод что большинство в браке.  \n\n**Наблюдения:**\n\n- Колонке семейный статус id проблем не обнаружено, значения совпадают со столбцом семейный статус\n\n<a name='Большинство-клиентов-женщины--66-процентов--'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- В возрасте пропусков нет\n- 3 уникальных значения\n- Значение XNA меньше чем у 1 %, возможно не указали пол\n- 66 % женщины, можно сделать вывод, что большинство женщины\n\n**Наблюдения:**\n\n- В столбце тип занятости 8 уникальных значений.  \n- Больше всего сотрудников (52 %)\n- 24 % компаньоны\n- 18 % пенсионеры\n- Меньше 1 % безработных.\n- Можно сделать вывод, что большинство либо пенсионеры, либо имеют занятость\n- Также меньше 1 % предприниматели.\n\n<a name='92---клиентов-не-имеют-долга-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**  \n\n- В колонке наличия долга 2 значения.  \n- Пропусков нет\n- 92 % людей не имеют долга\n\n**Наблюдения:**\n\n- В колонке цель кредита пропусков нет  \n- 38 уникальных значений, немного, но все таки есть похожие цели, нужно будет объединить в одно значение\n- Ярко выраженной цели кредита нет, но сложно точно определить, нужно объединить сначала похожие цели.  \n\nДля дальнейшего анализа срауз приведем колонку education к нижнему регистру и удалим лишние пробелы\n\nПроверим на ошибки целостности  \nЕсли у нас есть столбцы, в которых значения должны совпадать попарно, то проверяем на это.\n\nНет проблем с целостностью в образовании, несмотря на дубли в образовании.\n\nВ семейном статусе также нет проблем с целостностью.  \n\n#### 1.2.2 Изучение дубликатов<a name='1-2-2-Изучение-дубликатов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПроверим на дубли\n\nПосмотрим на дубли во всем датафрейме\n\nУ нас 54 полных дубля в таблице. Посмотрим на них.\n\n**Наблюдения:**\n\n- Так как у нас нет уникального идентификатора клиентов, то дубли это нормально\n- Также у нас в строках с дублями есть пропуски в некоторых столбцах, если бы не было пропусков,  \nто возможно дублей было бы меньше, так как было бы больше детализации\n\nПосмотрим сколько у нас дублей в каждой колонке\n\nПосмотрим на дубликаты между парами колонок\n\n**Наблюдения:**\n\n- У нас большинство колонок имеют попранные дубликаты, это скорее всего вызвано пропусками\n- Если бы не было пропусков в колонках стажа и дохода, то дублей было бы меньше\n\n#### 1.2.3 Изучение пропусков<a name='1-2-3-Изучение-пропусков'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПроверяем на пропуски    \n\nУ нас пропуски в колонке со стажем и в колокне с доходом.  \nПосмотрим на строки датафрейма с пропусками.  \n\nКоличество пропусков совпадает с точностью до строки.  \nВыдвигаем гипотезу, что пропуски в обоих колонках в одних и тех же строках.\n\nПроверим эту гипотезу\n\nПосмотрим на стаж\n\n**Наблюдения:**\n\n- 10 случайно взятых строк подтверждают гипотезу\n\nПосмотрим на доход\n\n**Наблюдения:**\n\n- 10 случайно взятых строк подтверждают гипотезу\n\nПосмотрим сколько пропусков в обоих колонках вместе\n\n**Наблюдения:**\n\n- Видим, что совместно пропуски в таком количестве строк как и по отдельности.  \nГипотеза подтвердилась. У нас пропуски в строке стаж связаны с пропусками в строке доход.  \nВозможно это вызвано тем, что при расчете дохода используется стаж, либо существует другое влияние одного на другое.  \n\n#### 1.2.4 Изучение выбросов<a name='1-2-4-Изучение-выбросов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nСначала изучим потенциальные выбросы, которые мы выявили при изучении колонок.  \nУ нас в количестве детей есть значение 20.   \nИзучим его подробнее.  \n\nПосмотрим на строки датафрейма, где количество детей равно 20\n\n**Наблюдения:**\n\n- Значительная часть людей с 20 детьми находятся в браке.  \n\n**Наблюдения:**\n\n- Большая часть сотрудники\n- Пенсионеры имеют меньшую долю с 20 детьми чем в основном количестве.  \n\nУ нас в доходе странные максимальные значения нужно их изучить\n\n**Наблюдения:**\n\n- Ничего особенного не заметно, возможно это не выбросы.\n\nПосмотрим на выбросы через квантили\n\n**Наблюдения:**\n\n- интересно что количество выбросов, кроме колонки количество детей, примерно одинаковое\n\nИзучим выбросы в разрезе категорий\n\n**Наблюдения:**\n\n- Видим, что клиенты с количеством больше 2 попали в выбросы, что логично\n- Также -1 попало в выброс, что тоже верно\n\n**Наблюдения:**\n\n- женат / замужем содержит значительно больше выбросов, даже учитывая что в общем количестве их тоже больше\n\n**Наблюдения:**\n\n- У мужчин немного побольше выбросов, учитывая размер группы мужчин\n\n**Наблюдения:**\n\n- Больше всего выбросов у сотрудников, даже больше чем пропорция сотрудников в общем количестве\n\n**Наблюдения:**\n\n- У женщин выбросов в стаже намного больше чем у мужчин, даже учитывая что женщин больше всего\n\n**Наблюдения:**\n\n- У пенсионеров значительно больше выбросов в стаже\n\n**Наблюдения:**\n\n- У должников выбросов в стаже меньше, учитывая пропорции.\n\n**Наблюдения:**\n\n- В выбросы попали самые молодые и самые старые по возрасту, что логично, также попал 0\n\n**Наблюдения:**\n\n- Не женат / не замужем выделяется по выбросам, учитывая пропорцию в общем количестве\n\n**Наблюдения:**\n\n- У пенсионеров больше выбросов по возрасту, что логично\n\n**Наблюдения:**\n\n- У женатых больше выбросов по доходу\n\n**Наблюдения:**\n\n- У пенсионеров больше выбросов по доходу\n\n**Наблюдения:**\n\n- Без задолженности немного больше выбросов по доходу.  \n\n### 1.3 Промежуточный вывод<a name='1-3-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.  \nТак как у нас нет уникального идентификатора клиентов, то эти дубли не выглядят ошибкой.  \nТакже у нас в строках с дублями есть пропуски в некоторых столбцах, если бы не было пропусков,  \nто возможно дублей было бы меньше, так как было бы больше детализации\n- В столбце с количеством детей есть отрицательные значения.  47 штук. Меньше 1 процента. Также есть клиенты с 20 детьми. Что странно.  \nТакое количество детей в основном у людей в браке и сотрудников. У пенсионеров явно доля с 20 детьми меньше, чем доле пенсионеров в общем количестве людей.\n- Возможно 20 детей связано с тем, что во время ввода данных указали лишний ноль.  \nРекомендация, сделать проверку на отрицательные значения и на 20 детей, чтобы на стадии ввода не допускать ошибок.  \n- 66 процентов имеют 0 детей, 22 процента имеют 1 ребенка, 10 % имеют 2 детей и меньше 5 % имеют более 2 детей.  \n- В колонке общий трудовой стаж есть 10 % пропущенных значений.  \n- 74 % отрицательных значений. Так быть не должно.  \n- Максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет. Явно это выброс.  \n- Столбец со стажем выглядит некорректно. Нужно выяснить методику расчета и разобраться в чем проблема.  \n- В колонке возраста 101 нулевое значение. Это явно ошибки.  \n- Медиана 42 года, первый квартиль 33 года, можно сделать вывод, что у нас в основном люди старше 30 лет.  \n- Больше всего людей около 40 лет.  \n- Только 5 процентов людей моложе 25 лет.  \n- Колонка дохода имеет слишком много знаков после запятой. Нужно выяснить причину.  \n- Доход больше 1 млн может быть правдой. Тем более такой доход в большинстве у мужчин с высшим образованием, у компаньонов или сотрудников.  \nНет оснований считать это выбросом. Максимальный доход 2 млн. Также может быть реальным.\n- Меньше 5 % людей имеют зарплату меньше 63 тысяч.  \nМожно сделать вывод, что большинство имеет высокий доход.  \nПри этом 25 % имеют доход больше 200 тысяч.  \n- В колонке с образованием присутствуют одни и те же значения с разными регистрами. Нужно выяснить почему так происходит при загрузке.  \nПри этом в колонке с id образования все в порядке.    \n- Больше всего людей со средним образованием 71 %. Высшее образование у 24 %.\n- 58 % женаты либо замужем. 19 % в гражданском браке. Можно сделать вывод что большинство в браке.  \n- В колонке пола присутствует значение XNA меньше чем у 1 %, возможно не указали пол.\n- 66 % женщины, можно сделать вывод, что большинство женщины\n- В столбце занятость больше всего сотрудников (52 %). Меньше 1 % безработных. Предпринимателей также 1 %. Можно сделать вывод, что большинство либо пенсионеры, либо имеют занятость.\n- 92 % не имеют долга\n- В колонке цель кредита 38 уникальных значений, немного, но все таки есть похожие цели, нужно будет объединить в одно значение.\n- У нас пропуски в колонке со стажем и в колокне с доходом.  \n- Гипотеза, что пропуски в обоих колонках расположены в одних и тех же строках подтвердилась.  \nВозможно это вызвано тем, что при расчете дохода используется стаж, либо существует другое влияние одного на другое.  \n- Категория семейного статуса 'женат / замужем' содержит значительно больше выбросов по количеству детей, даже учитывая что в общем количестве их тоже больше\n- У мужчин немного побольше выбросов по количеству детей, учитывая размер группы мужчин.\n- Больше всего выбросов по количеству детей у категории занятости 'сотрудник'\n- У женщин выбросов в стаже намного больше чем у мужчин, даже учитывая что женщин больше всего\n- У пенсионеров значительно больше выбросов в стаже\n- Категория семейного статуса 'Не женат / не замужем' выделяется по выбросам, учитывая пропорцию в общем количестве.\n- У пенсионеров больше выбросов по возрасту, что логично\n- Категория семейного статуса 'Не женат / не замужем' имеет больше выбросов по доходу\n- У пенсионеров больше выбросов по доходу\n- У людей без задолженности немного больше выбросов по доходу.  \n\n## 2. Предобработка данных<a name='2--Предобработка-данных'></a>\n\n### 2.1 Выбор нужных столбцов для дальнейшей работы и нормализация таблицы<a name='2-1-Выбор-нужных-столбцов-для-дальнейшей-работы-и-нормализация-таблицы'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nДля дальнейшего анализа нам не нужно 2 колонки с образованием и с семейным статусом.   \nУдалим колонки с id образования и семейного статуса, так как нам для графиков лучше подойдут названия, а не id.\n\nТакже колонка days_employed имеет совершенно некорректные данные, нужно разбираться откуда такие данные.  \nВ данный момент мы ничего не можем с этим сделать и любые действия могут исказить результат. Поэтому не будем брать эту колонку.  \n\nСохраним исходный датафрейм в переменную df_origin, чтобы была возможность вернуться к нему\n\n### 2.2 Обработка выбросов<a name='2-2-Обработка-выбросов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим где у нас отрицательные значения\n\nУ нас 0.2% отрицательных значений, лучше всего будет их просто удалить.\n\nПосмотрим где у нас нулевые значения\n\nВ количестве детей 0 это нормально. С этим ничего делать не будем.  \nВ возрасте 0.5% нулевых значений. Лучше будет их удалить.\n\nУбедимся, что у нас нет нулевых и отрицательных значений там, где их быть не должно\n\nПосле изучения данных мы выяснили, что у нас есть странное значение в количестве детей, которое может быть выбросом.  \n\n\nУ нас таких данных меньше пол процента, удалим их, так как нет уверенности, что это не выбросы.  \nЕсли их оставить, то они могут внести больше искажений, чем их удалить.  \n\n### 2.3 Обработка пропусков<a name='2-3-Обработка-пропусков'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим, где у нас пропуски\n\nУ нас 10 процентов пропусков в доходе.  \nУдалять нельзя. Попробуем заменить.  \n\nВ доходе мы можем заполнить пропуски учитывая категории.  \nВыберем категории следующие - образование, семейный статус, пол, занятость.  \nВыбраны эти категории, так как они могут оказывать влияние на  доход.  \n\nПосмотрим размеры групп, если заменять внутри этих групп\n\n**Наблюдения:**\n\n- 86 % групп с пропусками имеют 10 и более элементов. По таким группам можем заполнить пропуски медианой\n- 3 % групп имеют только пропуски, таких 3 пропусков всего, их мы такими группами заполнить не сможем.  \n\nЗаполним пропуски в группах от 10 элементов\n\nОставшиеся пропуски попробуем заполнить без учета семейного статуса\n\nОставшиеся заменим по образованию и типу занятости\n\nОставшиеся заменим медианой по образованию\n\nПропусков не осталось, можно продолжать анализ.\n\n### 2.4 Обработка дубликатов<a name='2-4-Обработка-дубликатов'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим снова на дубли после обработки пропусков\n\nУ нас нет столбцов, где дублей не должно быть и нет комбинаций столбцов, в которых не должно быть дублей.  \nПоэтому нет оснований обрабатывать дубли. Оставим как есть.\n\n### 2.5 Приведение данных к удобной форме<a name='2-5-Приведение-данных-к-удобной-форме'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nОкруглим значения в поле дохода до целого.  \nЦелая часть выглядит реальной. А с дробной частью нужно разбираться почему столько знаков.  \n\nПосмотрим сколько у нас людей с полом XNA осталось\n\nПосмотрим кто это\n\nВсего 1 человек. И мы не можем идентифицировать его пол.  \nУдалим, чтобы не мешало анализировать графики.  \n\n### 2.6 Категоризация данных<a name='2-6-Категоризация-данных'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nСделаем дополнительную колонку, в которой будет указано есть дети или нет\n\nСоздадим дополнительную категориальную переменную из возраста, для удобства анализа.  \n\nСделаем следующие группы\n- до 30 лет\n- от 30 до 40 лет\n- от 40 до 50 лет\n- от 50 до 60 лет\n- старше 60 лет\n\nСоздадим категориальную переменную по доходу\n\nСделаем следующие категории\n- до 50 тыс\n-  от 50 до 100 тыс\n- от 100 до 200 тыс\n-  от 200 до 500 тыс\n- от 500 тыс и выше\n\nСделаем категории из колонки целей кредита используя лемматизацию\n\nУдалим старую цель кредита\n\n### 2.7 Промежуточный вывод<a name='2-7-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- Удалили колонки с id образования и семейного статуса, так как нам для графиков лучше подойдут названия, а не id.\n- Колонка со стажем имеет совершенно некорректные данные. Чтобы не внести искажение в анализ, удалим эту колонку.\n- Удалили отрицательные значения в колонке с количеством детей, которые составляли 0,2% от общего количества записей в данных.\n- Удалили нулевые значения в колонке с возрастом, которые составляли 0,5% от общего количества записей в данных.\n- Удалили записи, где количество детей равно 20, которые составляли 0,35% от общего количества записей в данных.\n- Заполнили пропуски в столбце с доходом медианным значением, учитывая категории образование, семейный статус, пол, занятость.\n- Округлили значения дохода до целого.\n- Удалили 1 запись, где пол равен XNA\n- Создали дополнительную бинарную колонку, указывающую на наличие детей (1 - есть дети, 0 - нет детей).\n- Сделали дополнительную колонку с возрастными категориями.  \n- Сделали дополнительную колонку с категориями дохода.  \n- Тематизировали колонку с целью кредита, чтобы получить категории целей кредита.  \n\n## 3. Анализ корреляций между переменными<a name='3--Анализ-корреляций-между-переменными'></a>\n\n### 3.1 Исследование корреляционных связей<a name='3-1-Исследование-корреляционных-связей'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим на корреляцию между колонками\n\n**Наблюдения:**\n\n- Корреляции не обнаружено\n\nПосмотрим какие переменные сильнее других влияют на предсказание долга с помощью модели случайного леса\n\n<a name='Доход-является-самым-значимым-признаком-для-предсказания-задолженности-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Видим, что доход значительно превышает стаж и количество детей.  \n\n### 3.2 Промежуточный вывод<a name='3-2-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- Корреляций между переменными не обнаружено.\n- Доход является самым значимым признаком для предсказания задолженности.\n\n## 4. Визуализация взаимосвязей переменных<a name='4--Анализ-взаимосвязей-переменных-на-графиках'></a>\n\n### 4.1 Изучение зависимостей между числовыми переменными<a name='4-1-Изучение-зависимостей-между-числовыми-переменными'></a>  \n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим на зависимости между числовыми переменными.   \n<a name='Чем-меньше-количество-детей--тем-больше-значений-с-высоким-доходом-'></a>\n\n**Наблюдения:**\n\n- Можно заметить, что чем меньше количество детей, тем больше значений с высоким доходом.\n- Также можно заметить, что чем моложе клиент, тем в среднем у него больше детей.\n\n### 4.2 Изучение зависимостей между категориальными переменными<a name='4-2-Изучение-зависимостей-между-категориальными-переменными'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПосмотрим на распределение количества элементов между группами\n\n**Наблюдения:**\n\n- В каждой категории семейного положения доля женщин больше.\n\n**Наблюдения:**\n\n- Среди семейного статуса и занятости больше всего женатых сотрудников\n\n<a name='Нет-явной-зависимости-семейного-положения-и-задолженности-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Нет явной зависимости семейного положения и задолженности.\n- Не женатые и люди в гражданском браке чаще других имеют задолженность, но всего лишь на пару процентов долей.  \n- Женатых без долго явно больше остальных.\n\n**Наблюдения:**\n\n- Женатых без детей больше всего\n\n**Наблюдения:**\n\n- Возрастная группа 30-40 лет выделяется среди женатых\n\n<a name='Большая-часть-женатых-имеет-доход-100-200-тыс'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Большая часть женатых имеет доход 100-200 тыс\n\n<a name='Больше-всего-кредит-берут-на-цели--связанные-с-недвижимостью--кроме-людей-в-гражданском-браке'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Люди-в-гражданском-браке-чаще-берут-кредит-на-свадьбу'></a>\n\n**Наблюдения:**\n\n- Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке\n\n- Люди в гражданском браке чаще берут кредит на свадьбу\n\n**Наблюдения:**\n\n- Больше всего женщин сотрудников\n\n<a name='Женщины-чаще-возвращают-кредит--чем-мужчины-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Женщины чаще возвращают кредит. Это видно из пропорций.\n\n<a name='Люди-старше-60-лет-реже-других-имеют-долги'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Люди старше 60 лет реже других имеют долги (вкладка сравнение задолженность).\n\n<a name='Долги-присутствуют-у-людей-с-разным-доходом-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Долги есть у людей с разным доходом\n\n<a name='Кредиты-оформленные-на-цели-связанные-с-недвижимостью-реже-других-приводят-к-долгам'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\nНаблюдения:\n- Кредиты, оформленные на цели, связанные с недвижимостью, реже других приводят к долгам.\n\n**Наблюдения:**\n\n- Можно заметить, что категория возраста от 30 до 40 лет имеет больше зарплату\n\nПосмотрим на распределение количества людей по категориям на сэнки диаграмме\n\n### 4.3 Изучение зависимостей между числовыми и категориальными переменными<a name='4-3-Изучение-зависимостей-между-числовыми-и-категориальными-переменными'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  У мужчин средний доход выше\n\n<a name='На-всех-уровнях-образования--кроме-ученой-степени--доход-у-мужчин-выше-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  На всех уровнях образования, кроме ученой степени, доход у мужчин выше.\n\n<a name='Цель-получения-кредита-практически-не-зависит-от-среднего-ежемесячного-дохода-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  Цель получения кредита практически не зависит от среднего ежемесячного доход\n\n<a name='У-мужчин--которые-в-браке-или-были-в-браке--количество-детей-больше--чем-у-женщин-в-той-же-категории-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- У мужчин, которые в браке или были в браке, количество детей больше, чем у мужчин, женщин в той же категории\n- У женатых детей больше, что логично\n\n**Наблюдения:**\n\n-  Средний доход по семейному статусу примерно одинаковый, у вдовцов немного пониже\n\n**Наблюдения:**\n\n-  Медианный доход предпринимателей больше, чем у других.\n\n<a name='У-должников-в-среднем-больше-детей--В-частности--среди-должников-женщины-имеют-больше-детей-в-среднем--чем-мужчины--а-среди-не-должников-мужчины-имеют-больше-детей-в-среднем--чем-женщины'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- У должников в среднем больше детей. В частности, среди должников женщины имеют больше детей в среднем, чем мужчины, а среди не должников мужчины имеют больше детей в среднем, чем женщины\n\n<a name='У-должников-средний-возраст-немного-ниже-для-всех-категорий-семейного-положения-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  У должников средний возраст немного ниже\n\n**Наблюдения:**\n\n-  В разрезе семейного положения ситуация сохраняться, возраст немного меньше у должников\n\n<a name='Медианный-доход-у-должников-и-не-должников-практически-не-отличается'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n-  Медианный доход у должников и не должников практически не  отличается\n\n**Наблюдения:**\n\n- Среднее количество детей у группы 30-40 лет больше.\n- До 40 лет детей больше у женщин, старше 40 лет детей больше у мужчин\n\n**Наблюдения:**\n\n- Предприниматели до 30 лет имеют значительно болье средний доход, но в этой группе всего один клиент.\n- Странно, что в группе 40-50 лет безработные имеют доход сравнимый с другими группами, а в других возрастных категориях - нет.\n\n**Наблюдения:**\n\n- С доходом до 100 тысяч детей больше у женщин, а с доходом выше 100 тысяч - у мужчин.\n\n**Наблюдения:**\n\n- У женщин средний возраст выше, кроме категории ученая степень\n- У мужчин с ученой степенью средний возраст выше, чем у женщин, но размер группы 'ученая степень' маленький, поэтому утверждать нельзя.\n\n**Наблюдения:**\n\n- Средний возраст распределен логично, можно отметить, что госслужащие имеют средний возраст больше 40 лет\n\n**Наблюдения:**\n\n- Средний доход предпринимателей значительно выше других, но как видно предприниматель только 1, поэтому это нерепрезентативно.\n- В декрете и студент имеют самый низкий доход, но размеры групп маленькие, поэтому также нет уверенности в выводе.\n\n<a name='Должники-имеют-ниже-средний-возраст-как-мужчины-так-и-женщины--Ситуация-сохраняется-во-всех-группах-дохода-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Должники имеют ниже средний возраст как мужчины так и женщины.\n\n<a name='Люди-от-30-до-50-лет-имеют-самый-высокий-средний-доход-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**\n\n- Люди от 30 до 50 лет имеют самый высокий средний доход.\n\n**Наблюдения:**\n\n-  Во всех группах дохода, кроме 'больше 500 тыс' среднее количество детей у должников больше\n\n**Наблюдения:**\n\n-  Во всех группах дохода средний возраст должников ниже\n\n**Наблюдения:**\n\n-  Возрастная категория '30-40' лет имеет больше детей во всех категориях дохода\n\n**Наблюдения:**\n\n-  Для всех значений в семейном статусе, у людей без детей средний возраст выше.\n\n**Наблюдения:**\n\n-  Средний возраст у людей без детей выше примерно на 9 лет\n\n### 4.4 Промежуточный вывод<a name='4-4-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- Можно заметить, что чем меньше количество детей, тем больше значений с высоким доходом.\n- Среди семейного статуса и занятости больше всего женатых сотрудников\n- Женатых без долго явно больше остальных.\n- Большая часть женатых имеет доход 100-200 тыс\n- Женщины чаще возвращают кредит.\n- Долги есть у людей с разным доходом.\n- На всех уровнях образования, кроме ученой степени, доход у мужчин выше.\n- Цель получения кредита практически не зависит от среднего ежемесячного дохода.\n- У мужчин, которые в браке или были в браке, количество детей больше, чем у женщин в той же категории\n- Средний доход по семейному статусу примерно одинаковый, у вдовцов немного пониже\n- У должников в среднем больше детей\n- У должников среднее количество детей больше у женщин, а у не должников среднее количество детей больше у мужчин\n- У должников средний возраст немного ниже для всех категорий семейного положения.\n- Медианный доход у должников и не должников практически не отличается\n- Среднее количество детей у группы 30-40 лет больше.\n- До 40 лет детей больше у женщин, старше 40 лет детей больше у мужчин\n- В группе 40-50 лет безработные имеют доход сравнимый с другими группами, а в других возрастных категориях доход безработных значительно ниже.\n- С доходом до 100 тысяч детей больше у женщин, а с доходом выше 100 тысяч - у мужчин.\n- У женщин средний возраст выше, кроме категории ученая степень\n- Должники имеют ниже средний возраст как мужчины так и женщины. Ситуация сохраняется во всех группах дохода.\n- Люди от 30 до 50 лет имеют самый высокий средний доход.\n- Во всех группах дохода, кроме 'больше 500 тыс' среднее количество детей больше\n- Возрастная категория '30-40' лет имеет больше детей во всех категориях дохода\n- Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке\n- Люди в гражданском браке чаще берут кредит на свадьбу\n\n\n## 5. Формулирование и провера гипотез<a name='5--Формулирование-и-провера-гипотез'></a>\n\n### 5.1 Формулирование гипотез<a name='5-1-Формулирование-гипотез'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nНа основе проведенного анализа данных сформулируем следующие гипотезы:\n\nГипотеза 1: Нет зависимость между наличием детей и возвратом кредита в срок.  \nГипотеза 2: У мужчин средний доход выше  \nГипотеза 3: Цель получения кредита не зависит от еза 3: Цель получения кредита не зависит от среднего ежемесячного доход  \nГипотеза 4: Средний доход по семейному статусу одинаковый, но у вдовцов отличается  \nГипотеза 5: У должников в среднем больше детей   \nГипотеза 6: У должников средний возраст ниже  \nГипотеза 7: Медианный доход у должников и не должников не  отличается  \n\n### 5.2 Проверка гипотез<a name='5-2-Проверка-гипотез'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\nПроверим сформулированные гипотезы.\n\n**Гипотеза 1: Нет зависимость между наличием детей и возвратом кредита в срок**\n\nH0: Наличие детей не влияет на возврат кредита в срок.  \nH1: Наличие детей влияет на возврат кредита в срок.\n\nТак как у нас обе переменных категориальные, то воспользуемся критерием хи-квадрат Пирсона.  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что наличие детей не влияет на возврат кредита в срок не подтвердилась.\n\n**Гипотеза 2: У мужчин средний доход выше**\n\nH0: У мужчин средний доход не выше, чем у женщин  \nH1: У мужчин средний доход выше, чем у женщин\n\nпосмотрим на распределение\n\nУ нас значительные выбросы в доходе нужно использовать непараметрический тест\n\nИспользуем критерий Манна-Уитни  \nАльтернатива будет - больше  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что у мужчин средний доход выше, чем у женщин подтвердилась\n\n**Гипотеза 3: Цель получения кредита не зависит от среднего ежемесячного доход**\n\nH0: Средний ежемесячный доход не различается между группами цели получения кредита.   \nH1: Средний ежемесячный доход различается между группами цели получения кредита.\n\nИспользуем критерий Краскела-Уоллиса  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 у нас нет оснований отвергнуть гипотезу, что цель получения кредита практически не зависит от среднего ежемесяченого доход\n\n**Гипотеза 4: Средний доход по семейному статусу одинаковый, но у вдовцов отличается**\n\nH0: Средний ежемесячный доход не различается между группами по семейному статусу  \nH1: Средний ежемесячный доход различается между группами по семейному статусу\n\nИспользуем критерий Краскела-Уоллиса  \nУровень значимости alpha выберем 0.05\n\nИспользуем тест Тьюки, чтобы определить различия между группами  \nУровень значимости alpha выберем 0.05\n\nВидим, что гипотеза отвергается в парах где есть вдова / вдовец\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что средний доход по семейному статусу примерно одинаковый, но у вдовцов отличается подтвердилась.\n\n**Гипотеза 5: У должников в среднем больше детей**\n\nH0: У должников и не должников в среднем одинаковое количество детей.  \nH1: У должников в среднем больше детей, чем у не должников.\n\nПосмотрим на распределение количества детей\n\nТак как у нас дискретное распределение, то будем использовать критерий Манна-Уитни    \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что у должников в среднем больше детей подтвердилась.\n\n**Гипотеза 6: У должников средний возраст ниже**\n\nH0: У должников и не должников одинаковый средний возраст  \nH1: У должников средний возраст ниже, чем у не должников.\n\nПосмотрим на распределение возраста\n\nПроверим гипотезу, что дисперсии в группах не отличаются\n\nH0: У должников и не должников дисперсия не отличается  \nH1: У должников и не должников дисперсия отличается\n\nИспользуем тест Левена\n\nТак как дисперсия в группах разная, будем использовать тест Уэлча.  \nУровень значимости alpha выберем 0.05\n\nПостроим доверительный интервал\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что у должников средний возраст ниже подтвердилась.  \n95 % доверительный интервал для разницы средних возрастов для должников и не должников равен (-inf, -2.74)\n\n**Гипотеза 7: Медианный доход у должников и не должников не  отличается**\n\nH0: Медианный доход у должников и не должников не отличается  \nH1: Медианный доход у должников и не должников отличается\n\nИспользуем бутстреп для проверке гипотезы  \nУровень значимости alpha выберем 0.05\n\n**Результат:**  \nНа уровне значимости 0.05 нет оснований отвергнуть гипотезу. что медианный доход у должников и не должников не отличается.  \n95 % доверительный интервал разницы между медианным доходом должников и не должников равен (-2648.05, 179.34)\n\n### 5.3 Промежуточный вывод<a name='5-3-Промежуточный-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n- На уровне значимости 0.05 гипотеза, что у мужчин средний доход выше, чем у женщин подтвердилась\n- На уровне значимости 0.05 у нас нет оснований отвергнуть гипотезу, что цель получения кредита практически не зависит от среднего ежемесяченого доход\n- На уровне значимости 0.05 гипотеза, что средний доход по семейному статусу примерно одинаковый, но у вдовцов отличается подтвердилась.\n- На уровне значимости 0.05 гипотеза, что у должников в среднем больше детей подтвердилась.\n- На уровне значимости 0.05 гипотеза, что у должников средний возраст ниже подтвердилась.  \n95 % доверительный интервал для разницы средних возрастов для должников и не должников равен (-inf, -2.74)\n- На уровне значимости 0.05 нет оснований отвергнуть гипотезу. что медианный доход у должников и не должников не отличается.  \n95 % доверительный интервал разницы между медианным доходом должников и не должников равен (-2648.05, 179.34)\n- На уровне значимости 0.05 гипотеза, что наличие детей не влияет на возврат кредита в срок не подтвердилась.\n\n## 6. Общий вывод<a name='6--Общий-вывод'></a>\n<a href=\"#ref-to-toc\">Вернуться к выводам</a>\n\n**Выводы:**\n\n- Нет явной зависимости семейного положения и задолженности.\n- У должников в среднем больше детей. В частности, среди должников женщины имеют больше детей в среднем, чем мужчины, а среди не должников мужчины имеют больше детей в среднем, чем женщины.\n- Женщины чаще возвращают кредит, чем мужчины.\n- Долги присутствуют у людей с разным доходом.\n- Люди старше 60 лет реже других имеют долги.\n- Кредиты, оформленные на цели, связанные с недвижимостью, реже других приводят к долгам.\n- У должников средний возраст немного ниже для всех категорий семейного положения.\n- Медианный доход у должников и не должников практически не отличается.\n- Должники имеют ниже средний возраст как мужчины так и женщины. Ситуация сохраняется во всех группах дохода.\n- Больше всего кредит берут на цели, связанные с недвижимостью, кроме людей в гражданском браке.\n- Люди в гражданском браке чаще берут кредит на свадьбу.\n- Доход является самым значимым признаком для предсказания задолженности.\n- Люди от 30 до 50 лет имеют самый высокий средний доход.\n- Только 5 процентов клиентов моложе 25 лет. Основная часть клиентов старше 30 лет.\n- Меньше 5 % клиентов имеют зарплату меньше 63 тысяч. При этом 25 % имеют доход больше 200 тысяч.\n- 58 % клиентов либо женаты, либо замужем. 19 % в гражданском браке. Можно сделать вывод что большинство в браке.\n- Большинство клиентов женщины (66 процентов).\n- 92 % клиентов не имеют долга.\n- Чем меньше количество детей, тем больше значений с высоким доходом.\n- Большая часть женатых имеет доход 100-200 тыс.\n- На всех уровнях образования, кроме ученой степени, доход у мужчин выше.\n- Цель получения кредита практически не зависит от среднего ежемесячного дохода.\n- У мужчин, которые в браке или были в браке, количество детей больше, чем у женщин в той же категории.\n\n**Аномалии и особенности в данных:**\n\n- В датафрейме есть строки дубликаты. 54 строки. Меньше 1 % от всего датафрейма.  \n- В столбце с количеством детей есть отрицательные значения. 47 штук. Меньше 1 процента от всего датафрейма. Также есть клиенты с 20 детьми.\n- Колонка общий трудовой стаж содержит 74 % отрицательных значений. А также максимальное количество дней стажа больше 400 тысяч дней, это больше 1000 лет.\n- В колонке возраста 101 нулевое значение.\n- Колонка дохода имеет слишком много знаков после запятой.\n- В колонке с образованием присутствуют одни и те же значения с разными регистрами. При этом в колонке с id образования все в порядке.   \n\n**Результаты предобработки данных:**\n\n- Удалили колонки с id образования и семейного статуса, так как нам для графиков лучше подойдут названия, а не id.\n- Колонка со стажем имеет совершенно некорректные данные. Чтобы не внести искажение в анализ, удалим эту колонку.\n- Удалили отрицательные значения в колонке с количеством детей, которые составляли 0,2% от общего количества записей в данных.\n- Удалили нулевые значения в колонке с возрастом, которые составляли 0,5% от общего количества записей в данных.\n- Удалили записи, где количество детей равно 20, которые составляли 0,35% от общего количества записей в данных.\n- Заполнили пропуски в столбце с доходом медианным значением, учитывая категории образование, семейный статус, пол, занятость.\n- Округлили значения дохода до целого.\n- Удалили 1 запись, где пол равен XNA\n- Создали дополнительную бинарную колонку, указывающую на наличие детей (1 - есть дети, 0 - нет детей).\n- Сделали дополнительную колонку с возрастными категориями.  \n- Сделали дополнительную колонку с категориями дохода.  \n- Лематизировали колонку с целью кредита, чтобы получить категории целей кредита.  \n\n**Результаты проверки гипотез:**  \n\n- Гипотеза 1: У мужчин средний доход выше, чем у женщин  \n **Результат:**   На уровне значимости 0.05 гипотеза подтвердилась.\n- Гипотеза 2: Цель получения кредита практически не зависит от среднего ежемесячного дохода  \n **Результат:** На уровне значимости 0.05 у нас нет оснований отвергнуть гипотезу.\n- Гипотеза 3: Средний доход по семейному статусу примерно одинаковый, но у вдовцов отличается  \n **Результат:** На уровне значимости 0.05 гипотеза подтвердилась.\n- Гипотеза 4: У должников в среднем больше детей  \n **Результат:** На уровне значимости 0.05 гипотеза подтвердилась.   \n- Гипотеза 5: У должников средний возраст ниже  \n **Результат:** На уровне значимости 0.05 гипотеза подтвердилась. 95% доверительный интервал для разницы средних возрастов для должников и не должников равен (-inf, -2.74).  \n- Гипотеза 6: Медианный доход у должников и не должников не отличается  \n **Результат:** На уровне значимости 0.05 нет оснований отвергнуть гипотезу. 95% доверительный интервал разницы между медианным доходом должников и не должников равен (-2648.05, 179.34).  \n- Гипотеза 7: Наличие детей не влияет на возврат кредита в срок  \n **Результат:** На уровне значимости 0.05 гипотеза не подтвердилась.\n\n**Рекомендации:**\n\n- Добавить контроль данных, чтобы не дублировались значения с разными регистрами в колонке с образованием.\n- Добавить уникальный идентификатор клиента, чтобы избежать дублирования строк.\n- Добавить проверку на отрицательные значения и на слишком большие значения в количестве детей при загрузке данных.\n- Выяснить откуда возникают отрицательные значения в трудовом стаже и добавить контроль ввода невалидных данных.\n- Выяснить причину нулевых значений в колонке возраста и добавить проверку на нулевые значения при загрузке данных.\n- Выяснить причину большого количества знаков после запятой в колонке дохода.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"creditworthiness_research.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.37","theme":"../../flatly.scss","description_for_list":"Исследование влияния семейного положения и количества детей клиента на факт погашения кредита в срок для кредитного отдела банка.","title":"Исследование надёжности заёмщиков","code-summary":"Show the code","fontsize":"16px","smooth-scroll":true,"toc-location":"left","toc-title":"Оглавление","grid":{"body-width":"1100px"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}