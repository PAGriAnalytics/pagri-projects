{"title":"Исследование объявлений о продаже квартир","markdown":{"yaml":{"description_for_list":"Исследование факторов, влияющих на ценообразование на рынке недвижимости в Санкт-Петербурге.","format":{"html":{"code-fold":true,"code-summary":"Show the code","fontsize":"16px","smooth-scroll":true,"toc":true,"toc-location":"left","toc-title":"Оглавление","grid":{"body-width":"1100px"}}},"title":"Исследование объявлений о продаже квартир"},"headingText":"Загрузка библиотек<a name='1--Загрузка-библиотек'></a>","containsRefs":false,"markdown":"\n\n\n\n\n\n\n\n\n**Автор:**  \nГригорьев Павел   \n\n**Описание проекта:**  \nПроект направлен на исследование факторов, влияющих на ценообразование на рынке недвижимости в Санкт-Петербурге.  \nВ ходе проекта будут выявлены ключевые параметры, которые определяют стоимость квартир.  \nПолученные знания будут использованы для создания системы, которая будет отслеживать аномалии и предупреждать о возможных случаях мошенничества.\n\n**Цель:**    \nВыявить ключевые параметры, определяющие стоимость квартир, и разработать рекомендации для создания системы мониторинга,   \nкоторая поможет выявлять аномалии в ценах и предупреждать о мошенничестве на рынке недвижимости.\n\n**Источники данных:**  \nДанные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и соседних населённых пунктах за несколько лет.\n\n**Условия проведения анализа данных:**  \n\n\nДля анализ будут использоваться данные с 27 ноября 2014 по 3 мая 2019 года\n\n**Главные выводы:**<a name=\"ref-to-conclusions\"></a>  \n- <a href='#В-среднем-объявление-находится-в-продаже-180-дней-'>В среднем объявление находится в продаже 180 дней.</a>  \n- <a href='#Сильная-положительная-корреляция-между-жилой-площадью-и-общей-площадью'>Сильная положительная корреляция между жилой площадью и общей площадью</a>  \n- <a href='#Сильная-положительная-корреляция-между-числом-комнат-и-общей-площадью'>Сильная положительная корреляция между числом комнат и общей площадью</a>  \n- <a href='#Сильная-положительная-корреляция-между-числом-комнат-и-жилой-площадью'>Сильная положительная корреляция между числом комнат и жилой площадью</a>  \n- <a href='#Сильная-отрицательная-корреляция-между-отношением-площади-кухни-к-общей-площади-и-отношением-жилой-площади-к-общей-площади'>Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади</a>  \n- <a href='#Общая-площадь-является-самым-значимым-признаком-для-предсказания-цены-квартиры--Число-дней-экспозиции-находится-на-втором-месте-'>Общая площадь является самым значимым признаком для предсказания цены квартиры. Число дней экспозиции находится на втором месте.</a>  \n- <a href='#Можно-заметить--что-чем-ближе-к-центру-или-парку--тем-дороже-стоит-квартира-'>Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.</a>  \n- <a href='#Чем-больше-число-комнат--тем-больше-общая-площадь-'>Чем больше число комнат, тем больше общая площадь.</a>  \n- <a href='#Чем-больше-число-комнат--тем-больше-жилая-площадь-'>Чем больше число комнат, тем больше жилая площадь.</a>  \n- <a href='#В-воскресенье-и-субботу-меньше-всего-публикаций'>В воскресенье и субботу меньше всего публикаций</a>  \n- <a href='#Есть-тренд-на-увеличение-количества-фотографий-по-годам-'>Есть тренд на увеличение количества фотографий по годам.</a>  \n- <a href='#В-премиуме-среднее-количество-комнат-больше-на-всех-этажах'>В премиуме среднее количество комнат больше на всех этажах</a>  \n- <a href='#У-премиум-площадь-квартир-больше-на-всех-этажах'>У премиум площадь квартир больше на всех этажах</a>  \n- <a href='#В-центре-медианная-стоимость-квартир-выше'>В центре медианная стоимость квартир выше</a>  \n- <a href='#В-центре-медианная-площадь-квартир-больше'>В центре медианная площадь квартир больше</a>  \n- <a href='#В-центре-медианное-количество-комнат-больше'>В центре медианное количество комнат больше</a>  \n- <a href='#В-центре-медианная-высота-потолков-выше-'>В центре медианная высота потолков выше.</a>  \n- <a href='#В-центре-медианное-количество-дней-экспозиции-больше-'>В центре медианное количество дней экспозиции больше.</a>  \n- <a href='#Среднее-и-медиана-в-центре-для-цены-выше-почти-в-2-раза--чем-во-всем-датафрейме-'>Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме.</a>  \n- <a href='#Общая-площадь-в-центре-больше--чем-во-всем-датафрейме-'>Общая площадь в центре больше, чем во всем датафрейме.</a>  \n- <a href='#Высота-потолков-в-центре-больше--чем-во-всем-датафрейме'>Высота потолков в центре больше, чем во всем датафрейме</a>  \n- <a href='#В-центре-меньше-балконов--чем-во-всем-датафрейме-'>В центре меньше балконов, чем во всем датафрейме.</a>  \n- <a href='#В-центре-меньше-эконома-и-больше-премиум-квартир-'>В центре меньше эконома и больше премиум квартир.</a>  \n- <a href='#Санкт--Петербург--Пушкин-и-деревня-Кудрово-имеют-самую-большую-цену-квадратного-метра-'>Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.</a>  \n\n\n**Аномалии и особенности в данных:**<a name=\"ref-to-anomalies\"></a>  \n- <a href='#Минимальное-значение-цены-12-190-является-аномальным-'>Минимальное значение цены 12 190 является аномальным.</a>  \n- <a href='#В-высоте-потолков-есть-пропуски--39-процентов-'>В высоте потолков есть пропуски (39 процентов)</a>  \n- <a href='#В-высоте-потолков-много-выбросов--Есть-значение-100-'>В высоте потолков много выбросов. Есть значение 100.</a>  \n- <a href='#В-количестве-этажей-есть-пропуски--меньше-1-процента-'>В количестве этажей есть пропуски (меньше 1 процента)</a>  \n- <a href='#В-жилой-площади-8-процентов-пропусков-'>В жилой площади 8 процентов пропусков.</a>  \n- <a href='#В-площади-кухни-10-процентов-пропусков-'>В площади кухни 10 процентов пропусков.</a>  \n- <a href='#В-числе-балконов-49-процентов-пропусков--Скорее-всего-пропуски-это-отсутствие-балкона-'>В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.</a>  \n- <a href='#В-расстоянии-до-ближайшего-аэропорта-23-процента-пропусков-'>В расстоянии до ближайшего аэропорта 23 процента пропусков.</a>  \n- <a href='#В-расстоянии-до-центр-города-23-процента-пропусков-'>В расстоянии до центр города 23 процента пропусков.</a>  \n- <a href='#В-колонке-с-количеством-парков-рядом-23-процента-пропусков-'>В колонке с количеством парков рядом 23 процента пропусков.</a>  \n- <a href='#В-колонке-с-расстоянием-до-ближайшего-парка-66-процентов-пропусков-'>В колонке с расстоянием до ближайшего парка 66 процентов пропусков.</a>  \n- <a href='#В-колонке-с-количеством-прудов-23-процента-пропусков--скорее-всего-это-отсутствие-парков-'>В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.</a>  \n- <a href='#В-колонке-с-расстоянием-до-ближайшего-пруда-62-процента-пропусков-'>В колонке с расстоянием до ближайшего пруда 62 процента пропусков.</a>  \n- <a href='#В-колонке-с-количеством-дней-экспозиции-13-процентов-пропусков-'>В колонке с количеством дней экспозиции 13 процентов пропусков.</a>  \n- <a href='#В-колонке-с-признаком-является-ли-квартира-апартаментом-88-процентов-пропусков--Скорее-всего-эти-квартиры-не-являются-апартаментами-'>В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.</a>  \n- <a href='#В-колонке-с-названием-населенного-пункта-49-пропущенных-значений--меньше-1-процента-'>В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)</a>  \n- <a href='#Пропуски-в-колонках-с-количеством-парков-рядом--количеством-прудов-рядом-'>Пропуски в колонках с количеством парков рядом, количеством прудов рядом,</a>  \n- <a href='#Пропуски-в-количестве-этажей-совпадают-с-пропусками-в-признаке-является-ли-квартира-апартаментом'>Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом</a>  \n- <a href='#В-количестве-этаже-пропуски-зависят-от-признака-является-ли-квартира-студией-'>В количестве этаже пропуски зависят от признака является ли квартира студией.</a>  \n\n\n**Рекомендации:**  \n- Добавить контроль ввода слишком больших и слишком маленьких значений для цены, высоты потолка.  \n- Добавить контроль ввода для количества комнат, чтобы исключить ввод нулевых значений.  \n- Выяснить почему пропуски в колонках с количеством парков рядом, количеством прудов рядом,  \nрасстоянием до центра, расстоянием до аэропорта в одних и тех же строках.  \n\n\n## 1. Описание и изучение данных<a name='1--Описание-и-изучение-данных'></a>\n\n### 1.1 Описание данных<a name='1-1-Описание-данных'></a>\n\nПо каждой квартире на продажу доступны два вида данных. Первые вписаны пользователем, вторые — получены автоматически на основе картографических данных.  \nНапример, расстояние до центра, аэропорта, ближайшего парка и водоёма.\n\n- airports_nearest - расстояние до ближайшего аэропорта в метрах (м)\n- balcony - число балконов\n- ceiling_height - высота потолков (м)\n- cityCenters_nearest - расстояние до центра города (м)\n- days_exposition - сколько дней было размещено объявление (от публикации до снятия)\n- first_day_exposition - дата публикации\n- floor - этаж\n- floors_total - всего этажей в доме\n- is_apartment - апартаменты (булев тип)\n- kitchen_area - площадь кухни в квадратных метрах (м²)\n- last_price - цена на момент снятия с публикации\n- living_area - жилая площадь в квадратных метрах(м²)\n- locality_name - название населённого пункта\n- open_plan - свободная планировка (булев тип)\n- parks_around3000 - число парков в радиусе 3 км\n- parks_nearest - расстояние до ближайшего парка (м)\n- ponds_around3000 - число водоёмов в радиусе 3 км\n- ponds_nearest - расстояние до ближайшего водоёма (м)\n- rooms - число комнат\n- studio - квартира-студия (булев тип)\n- total_area - площадь квартиры в квадратных метрах (м²)\n- total_images - число фотографий квартиры в объявлении\n\n### 1.2 Изучение данных<a name='1-2-Изучение-данных'></a>\n\n#### 1.2.1 Изучение переменных<a name='2-2-1-Изучение-переменных'></a>\n\nОставим тип float, так как у нас пропуски в данных и мы не можем преобразовать нужные столбцы в int\n\nИзучим каждую колонку отдельно\n\n**Наблюдения:**\n\n- Полных дубликатов в датафрейме нет\n\n**Наблюдения:**    \n \n- В колонке с датой пропущенных значений нет.\n- Нет пропущенных годов и месяцев.\n- 8 процентов дней пропущено\n\n**Наблюдения:**      \n\n- В колонке с количеством фотографий пропусков нет\n- 4 процента записей с нулями, это нормально, поскольку у части объявлений нет изображений.\n- Максимальное количество фотографий 50. Это многовато, нужно будет это проверить.\n- Медианное значение 9, похоже на правду.\n- 7 процентов записей имеют 20 фотографий. \n\n<a name='Минимальное-значение-цены-12-190-является-аномальным-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В цене есть выбросы.\n- Минимальное значение цены 12 190 и максимальное значение 763 млн выглядят подозрительно.\n\n**Наблюдения:**  \n  \n- Максимальная площадь в 900 квадратов.\n- Также нужно проверить площадь 12 квадратов\n\n**Наблюдения:**    \n\n- Есть квартиры с 0 комнат, возможно так обозначили студии.\n- Максимальное количество комнат 19 нужно изучить.\n- Треть квартир с 1 комнатой и треть квартир с двумя комнатами. Четверть с 3 комнатами.\n- Квартир с 4 и более команд около 6 процентов.\n\n<a name='В-высоте-потолков-есть-пропуски--39-процентов-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a><a name='В-высоте-потолков-много-выбросов--Есть-значение-100-'></a>\n\n**Наблюдения:**    \n\n- В высоте потолков пропуски (39 процентов)\n- Явный выброс 100 в высоте потолков.\n\n<a name='В-количестве-этажей-есть-пропуски--меньше-1-процента-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В количестве этажей есть пропуски (меньше 1 процента)\n- Максимальное количество этаже 60 нужно проверить.\n- Больше всего пятиэтажек (25 процентов)\n\n<a name='В-жилой-площади-8-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В жилой площади 8 процентов пропусков.\n- Нужно проверить минимальную и максимальную жилую площади.\n\n**Наблюдения:**    \n\n- Больше всего квартир с 1 по 5 этаж. Это логично, учитывая, что у нас больше всего пятиэтажек.\n\n<a name='В-площади-кухни-10-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В площади кухни 10 процентов пропусков.  \n- Нужно проверить опять же максимальные и минимальные кухонные площади.\n\n<a name='В-числе-балконов-49-процентов-пропусков--Скорее-всего-пропуски-это-отсутствие-балкона-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.  \n- Треть квартир без балконов, также по трети квартир с 1 и 2 балконами.\n\n<a name='В-расстоянии-до-ближайшего-аэропорта-23-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В расстоянии до ближайшего аэропорта 23 процента пропусков.\n- 1 нулевое значение \n\n<a name='В-расстоянии-до-центр-города-23-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В расстоянии до центр города 23 процента пропусков. \n\n<a name='В-колонке-с-количеством-парков-рядом-23-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с количеством парков рядом 23 процента пропусков.  \n\n<a name='В-колонке-с-расстоянием-до-ближайшего-парка-66-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с расстоянием до ближайшего парка 66 процентов пропусков.  \n\n\n<a name='В-колонке-с-количеством-прудов-23-процента-пропусков--скорее-всего-это-отсутствие-парков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.  \n\n<a name='В-колонке-с-расстоянием-до-ближайшего-пруда-62-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с расстоянием до ближайшего пруда 62 процента пропусков. \n\n<a name='В-среднем-объявление-находится-в-продаже-180-дней-'></a>\n<a name='В-колонке-с-количеством-дней-экспозиции-13-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В среднем объявление находится в продаже 180 дней, но из за выбросов оно не совсем точно описывает ситуацию.\n- Лучше использовать медиану. Она составляет 95 дней. \n- Чаще всего объявления находятся в продаже 45 дней. \n- В колонке с количеством дней экспозиции 13 процентов пропусков. \n- Максимальное значение в 1580 дней похоже на выброс.\n\n<a name='В-колонке-с-признаком-является-ли-квартира-апартаментом-88-процентов-пропусков--Скорее-всего-эти-квартиры-не-являются-апартаментами-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.  \n\n**Наблюдения:**    \n\n- Студий меньше 1 процента. \n\n**Наблюдения:**    \n\n- Почти все квартиры с открытой планировкой.\n\n<a name='В-колонке-с-названием-населенного-пункта-49-пропущенных-значений--меньше-1-процента-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)\n\n#### 1.2.2 Изучение дубликатов<a name='1-2-2-Изучение-дубликатов'></a>\n\nПосмотрим на дубли во всем датафрейме\n\nПолных дубликатов у нас нет.\n\nПосмотрим сколько у нас дублей в каждой колонке\n\nУ нас нет столбцов, в которых данные должны быть уникальны, поэтому проверять на дубли нечего.\n\n#### 1.2.3 Изучение пропусков<a name='1-2-3-Изучение-пропусков'></a>\n\nПосмотрим на столбцы, в которых есть пропуски.\n\nУ нас есть пропуски в площадях. Посмотрим как они распределены.\n\nПосмотрим есть ли пропуски сразу во всех площадях. \n\nПропусков одновременно во всех столбцах с площадями нет.  \nПосмотрим на строки датафрейма, где пропуски во всех площадях.  \n\nУ нас нет пропусков в общей площади. Поэтому мы сможем заменить значения пропусков в площади кухни и жилой площади.  \n\nМожно заметить, что количество пропусков в колонке с количеством парков рядом, количеством прудов рядом совпадает,\nрасстоянием до центра, расстоянием до аэропорта примерно равны.\nВыдвигаем гипотезу, что пропуски в одних и тех же строках в обоих столбцах.  \n\nПосмотрим сколько пропусков в обоих колонках вместе\n\n<a name='Пропуски-в-колонках-с-количеством-парков-рядом--количеством-прудов-рядом-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Гипотеза подтвердилась**:\n- Пропуски в одних и тех же строках в колонках с количеством парков рядом, количеством прудов рядом совпадает,\nрасстоянием до центра, расстоянием до аэропорта примерно равны\n\nПосмотрим как распределены пропуски по категориям в строках, где пропуски одновременно в этих столбцах.  \n\n**Наблюдения:**    \n\n- Явных зависимостей от категорий не обнаружено\n\nИзучим пропуски по категориям\n\n<a name='Пропуски-в-количестве-этажей-совпадают-с-пропусками-в-признаке-является-ли-квартира-апартаментом'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом.\n\n<a name='В-количестве-этаже-пропуски-зависят-от-признака-является-ли-квартира-студией-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В количестве этаже пропуски зависят от признака является ли квартира студией.  \n- Почти все пропуски в квартирах, которые не являются студиями, даже учитывая общее количество пропорций.\n\n**Наблюдения:**    \n\n- В студиях в поле площадь кухни одни пропуски.\n\n**Наблюдения:**   \n\n- В студиях в поле площадь кухни одни пропуски. \n\n#### 1.2.4 Изучение выбросов<a name='1-2-4-Изучение-выбросов'></a>\n\nСначала изучим потенциальные выбросы, которые мы выявили при изучении колонок.  \n\nИзучим выброс с ценой 12190.0\n\n**Наблюдения**:  \n- Ничего особенно не обнаружено.  \n- Скорее всего ошиблись не поставили нули.\n\nПосмотрим на выбросы с площадью квартиры. \n\n**Наблюдения**:  \n- Не похоже на выбросы. Цена большая, количество комнат большое. Скорее всего просто большие дорогие квартиры. \n\n**Наблюдения**:  \n- Не похоже на выбросы. Скорее всего это мелко нарезанные студии. Тем более этаж низкий.\n\nИзучим выброс в высоте потолка.  \n\n**Наблюдения**:  \n- Значения от 20 до 32 скорее всего поставили не там запятую.  \n- А вот значения 10 и 100 странные.\n\nИзучим выбросы в количестве этажей\n\n**Наблюдения**:  \n- Так как в Санкт-Петербург\tесть здания такой высоты, то нет оснований считать это выбросами. \n\n#### 1.2.5 Изучение отрицательных значений<a name='1-2-5-Изучение-отрицательных-значений'></a>\n\nИзучаем отрицательные значения\n\nУ нас нет отрицательных значений. \n\n#### 1.2.6 Изучение нулевых значений<a name='1-2-6-Изучение-нулевых-значений'></a>\n\nИзучаем нулевые значения\n\nВсе кроме количества комнат и расстояния до ближайшего аэропорта может быть нулями, поэтому удалим их из текущего изучения.  \n\nПосмотрим отдельно на нулевое значение в расстоянии до аэропорта.  \n\nВыдвинем гипотезу, что 0 комнат у студий и однокомнатных.  \nПроверим гипотезу по площади.  \nПредположим, что площадь студий и однокомнатных квартир составляет не более 40 м2.\n\nПосмотрим на выборку из датафрейма\n\n**Наблюдения:**      \n\n- Видим, что почти все квартиры с 0 комнат имеют площадь до 40 кв. \n- 2 квартиры имеют открытую планировку  \n- Можно будет заменить 0 на 1.\n\n**Наблюдения**:  \n- Большая часть квартир с нулем комнат являются студиями.\n\n### 1.3 Промежуточный вывод<a name='1-3-Промежуточный-вывод'></a>\n\n- 8 процентов дней пропущено\n- Минимальное значение цены 12 190 и максимальное значение 763 млн выглядят подозрительно.\n- Максимальная площадь в 900 квадратов.\n- В высоте потолков пропуски (39 процентов)\n- В высоте потолков много выбросов. Есть значение 100.\n- В количестве этажей есть пропуски (меньше 1 процента)\n- Больше всего пятиэтажек (25 процентов)\n- В жилой площади 8 процентов пропусков.\n- В площади кухни 10 процентов пропусков.  \n- В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.  \n- Треть квартир без балконов, также по трети квартир с 1 и 2 балконами.\n- В расстоянии до ближайшего аэропорта 23 процента пропусков.\n- В расстоянии до центр города 23 процента пропусков. \n- В колонке с количеством парков рядом 23 процента пропусков.  \n- В колонке с расстоянием до ближайшего парка 66 процентов пропусков.  \n- В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.  \n- В колонке с расстоянием до ближайшего пруда 62 процента пропусков. \n- В среднем объявление находится в продаже 180 дней, но из за выбросов оно не совсем точно описывает ситуацию.\n- В колонке с количеством дней экспозиции 13 процентов пропусков. \n- В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.  \n- В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)\n- Пропуски в одних и тех же строках в колонках с количеством парков рядом, количеством прудов рядом совпадает,\nрасстоянием до центра, расстоянием до аэропорта примерно равны\n- Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом.\n- В количестве этаже пропуски зависят от признака является ли квартира студией.  \n- Почти все пропуски в квартирах, которые не являются студиями, даже учитывая общее количество пропорций.\n- В студиях в поле площадь кухни одни пропуски.\n\n## 2. Предобработка данных<a name='2--Предобработка-данных'></a>\n\n### 2.1 Выбор нужных столбцов для дальнейшей работы<a name='2-1-Выбор-нужных-столбцов-для-дальнейшей-работы'></a>\n\nСохраним исходный датафрейм в переменную df_origin, чтобы была возможность вернуться к нему\n\n\n### 2.2 Обработка выбросов<a name='2-2-Обработка-выбросов'></a>\n\nПосле изучения данных отрицательные значения не обнаружены, но есть колонки с нулевыми значениями, где их быть не должно.  \n\nПосмотрим где у нас нулевые значения\n\nНам нужно обработать нули в количестве комнат и в расстоянии до аэропорта. \n\nТак как это всего одна запись и точно восстановить расстояние невозможно, то лучше удалить ее.  \n\nОбработаем нулевые значения в количестве комнат.\n\nТак как мы выяснили, что 0 комнат указано у студий и в открытой планировке, либо у квартир с площадью до 40 кв.,  \nто заменим 0 на 1.  \n\nУбедимся, что у нас не осталось нулевых и отрицательных значений где их быть не должно.  \n\nУ нас в цене есть одна запись со значением 12190.\nСкорее всего не поставили нули, но сложно определить сколько именно нулей не поставили.  \nТак как это всего 1 запись, то удалим ее. \n\nОбработаем выбросы в высоте потолков. \n\nБудем считать, что высота потолков больше 5 метров является маловероятным.  \nПосмотрим сколько у нас записей с высотой потолка больше 5 метров.  \n\nТак как их очень мало и мы не можем обработать эти выбросы, то удалим их.  \n\n### 2.3 Обработка пропусков<a name='2-3-Обработка-пропусков'></a>\n\nПосмотрим где у нас пропуски.  \n\nМы выяснили, что у нас пропуски в столбцах 'airports_nearest', 'center', 'around 3000', 'around 3000'  \nв одних и тех же строчках.    \nТак как количество пропусков большое, то заменять их нельзя.  \nПоэтому оставим их как есть. \n\nПропуски в высоте потолков мы обрабатывать не можем, так как их сильно много.  \n\nПропуски в количестве этажей удалим, так как их мало.  \n\nПропуски в жилой площади и в площади кухни обработаем с помощью коэффициентов отношения площадей.  \nПри этом рассчитывать будем с учетом количества комнат, чтобы было точнее.  \n\nПризнак является ли квартира апартаментом имеет много пропусков.  \nОпределить является ли квартира апартаментом мы не можем, поэтому заменим на значение \"не указано\".\n\nПропуски в названии населенного пункта мы заменить не можем, и их очень мало, поэтому удалим их.\n\nОстальные пропуски оставим как есть, чтобы не исказить данные.  \n\n### 2.4 Приведение данных к удобной форме<a name='2-4-Приведение-данных-к-удобной-форме'></a>\n\nИзменим значения в столбцах на более удобные\n\nИзменим типы данных на более подходящие.\n\nУбедимся, что у нас нет дробных чисел в цене.  \n\nПриведем цену к целому типу.  \n\n### 2.5 Промежуточный вывод<a name='2-5-Промежуточный-вывод'></a>\n\n- Мы выяснили, что 0 комнат указано у студий, либо в открытой планировке, либо у квартир с площадью до 40 кв.,  \nпоэтому нули в количестве комнат заменили на 1.\n- В цене была одна запись со значением 12190. Скорее всего не поставили нули, но сложно определить сколько именно нулей не поставили.  \nТак как это всего 1 запись, то удалили ее. \n- Удалили 36 записей (0.2%) с высотой потолка больше 5 метров. Так как таких записей мало, а замена их может исказить анализ.  \n- В высоте потолка пропусков слишком много, поэтому их не стали трогать.  \n- В количестве этажей пропуски удалили, так как определить реальный этаж невозможно, а пропусков мало.  \n- Пропуски в жилой площади и в площади кухни обработали с помощью коэффициентов отношения площадей.  \nПри этом расчеты провели с учетом количества комнат, чтобы было точнее.  \n- Признак является ли квартира апартаментом имеет много пропусков.  \nОпределить является ли квартира апартаментом мы не можем, поэтому заменили на значение \"не указано\".\n- Удалили пропуски в названии населенных пунктов, так как их мало.  \n\n## 3. Обогащение данных и создание новых переменных<a name='3--Обогащение-данных-и-создание-новых-переменных'></a>\n\n### 3.1 Создание новых числовых переменных<a name='3-1-Создание-новых-числовых-переменных'></a>\n\nСоздадим переменную соотношение жилой и общей площади\n\nСоздадим переменную отношения площади кухни к общей.\n\nСоздадим переменную цена квадратного метра\n\nСоздадим новую переменную - расстояние до центра километрах.\n\n### 3.2 Категоризация данных<a name='3-2-Категоризация-данных'></a>\n\nСоздадим новую категориальную переменную из этажа.  \nСделаем 3 значения - первый, последний и другой\n\nСоздадим новую категориальную переменную из цены\n\nСоздадим переменные день недели, месяц и год публикации объявления.\n\nСоздадим новую категориальную переменную месяц-год\n\nСоздадим новую категориальную переменную из расстояния до центра.   \nЧтобы определить границы зон, построим график зависимости цены от расстояния до центра.\n\nМожно заметить, что на 5 км от центра падение цены замедляется.  \nВыберем 5 км как границу для центра.   \nИ выберем 20 км как зону окраины\n\n\n### 3.3 Промежуточный вывод<a name='3-3-Промежуточный-вывод'></a>\n\n- Создали переменную соотношение жилой и общей площади\n- Создали переменную отношения площади кухни к общей.\n- Создали переменную цена квадратного метра\n- Создали новую переменную - расстояние до центра километрах.\n- Создадим новую категориальную переменную позиция этажа. Сделали 3 значения - первый, последний и другой\n- Из цены создали новую категориальную переменную - сегмент цены. Сделали 3 значения - эконом, комфорт, премиум.  \n- Создали переменные день недели, месяц, год и месяц-год публикации объявления.\n- Создали новую категориальную переменную из расстояния до центра. Сделали значения - центр, окраина, средняя удаленность\n\n## 4. Визуализация взаимосвязей переменных<a name='4--Визуализация-взаимосвязей-переменных'></a>\n\n### 4.1 Исследование корреляционных связей<a name='4-1-Исследование-корреляционных-связей'></a>\n\nПостроим матрицу корреляции.\n\n\n<a name='Сильная-положительная-корреляция-между-жилой-площадью-и-общей-площадью'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Сильная-положительная-корреляция-между-числом-комнат-и-общей-площадью'></a><a name='Сильная-положительная-корреляция-между-числом-комнат-и-жилой-площадью'></a><a name='Сильная-отрицательная-корреляция-между-отношением-площади-кухни-к-общей-площади-и-отношением-жилой-площади-к-общей-площади'></a>\n\n**Наблюдения:**     \n \n- Сильная положительная корреляция между жилой площадью и общей площадью\n- Сильная положительная корреляция между числом комнат и общей площадью\n- Сильная положительная корреляция между числом комнат и жилой площадью\n- Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади\n- Умеренная положительная корреляция между площадью кухни и общей площадью\n- Умеренная положительная корреляция между ценой и общей площадью\n- Умеренная положительная корреляция между ценой и жилой площадью\n- Умеренная положительная корреляция между ценой и площадью кухни\n- Умеренная положительная корреляция между ценой и жилой площадью\n\nПостроим модель случайного леса для определения цены и посмотрим какие переменные сильнее всего влияют на решения модели.   \n\n<a name='Общая-площадь-является-самым-значимым-признаком-для-предсказания-цены-квартиры--Число-дней-экспозиции-находится-на-втором-месте-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- Общая площадь является самым значимым признаком для предсказания цены квартиры.   \nЧисло дней экспозиции находится на втором месте. \n\n### 4.2 Изучение зависимостей между числовыми переменными<a name='4-2-Изучение-зависимостей-между-числовыми-переменными'></a>\n\nИзучим зависимости между числовыми переменными, используя графики рассеяния.\n\n<a name='Можно-заметить--что-чем-ближе-к-центру-или-парку--тем-дороже-стоит-квартира-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Чем-больше-число-комнат--тем-больше-общая-площадь-'></a><a name='Чем-больше-число-комнат--тем-больше-жилая-площадь-'></a>\n\n**Наблюдения:**      \n\n- С ростом цены растет общая площадь, жилая площадь и площадь кухни.\n- Есть небольшая зависимость между ценой и количеством этажей. Чем больше цена, тем меньше этажей.  \nЭто скорее всего связано с тем, что старые дома имеют меньше этажей и загородные дома имеют также меньше этажей.\n- Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.\n- Чем больше число комнат, тем больше общая площадь, что логично.  \n- Чем ближе к центру, тем меньше общая площадь. Скорее всего это связано с тем, что в центре больше студий.  \n- Чем больше число комнат, тем больше жилая площадь, что логично.  \n\n### 4.3 Изучение зависимостей между категориальными переменными<a name='4-3-Изучение-зависимостей-между-категориальными-переменными'></a>\n\nИзучим распределение долей в категориальных переменных. \n\n**Наблюдения:**       \n\n- В этажах кроме первого и последнего комфорта больше всего.\n\nПосмотрим на распределение количества элементов между группами\n\n**Наблюдения:**    \n\n- Больше всего квартир комфорт класса с этажом не первым и не последним.\n\n<a name='В-воскресенье-и-субботу-меньше-всего-публикаций'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В воскресенье и субботу меньше всего публикаций\n\n**Наблюдения:**    \n- Больше всего объявлений со средней удаленностью от центра.\n\n### 4.4 Анализ временных зависимостей<a name='4-4-Анализ-временных-зависимостей'></a>\n\n<a name='Есть-тренд-на-увеличение-количества-фотографий-по-годам-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- Есть тренд на увеличение количества фотографий по годам.\n\n**Наблюдения:**       \n\n- Медианная цена квартиры не сильно изменяется со временем\n\n**Наблюдения:**      \n\n- Медианная площадь квартир не сильно меняется со временем\n\n**Наблюдения:**      \n\n- Медианная стоимость квадратного метра практически не меняется со временем\n\n### 4.5 Изучение зависимостей между числовыми и категориальными переменными<a name='4-5-Изучение-зависимостей-между-числовыми-и-категориальными-переменными'></a>\n\nПосмотрим на взаимосвязи между числовыми и категориальными переменными.\n\n<a name='В-премиуме-среднее-количество-комнат-больше-на-всех-этажах'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В премиуме среднее количество комнат больше на всех этажах\n\n<a name='У-премиум-площадь-квартир-больше-на-всех-этажах'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- У премиум площадь квартир больше на всех этажах\n\n<a name='В-центре-медианная-стоимость-квартир-выше'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианная стоимость квартир выше\n\n<a name='В-центре-медианная-площадь-квартир-больше'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианная площадь квартир больше\n\n<a name='В-центре-медианное-количество-комнат-больше'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианное количество комнат больше\n\n<a name='В-центре-медианная-высота-потолков-выше-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианная высота потолков выше.\n\n**Наблюдения:**       \n\n- Самые высокие дома находятся на средней удаленности от центра\n\n<a name='В-центре-медианное-количество-дней-экспозиции-больше-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианное количество дней экспозиции больше. \n\n### 4.6 Анализ срезов данных<a name='4-6-Анализ-срезов-данных'></a>\n\nИзучим объявления в центре и сравним их с объявлениями в целом.  \n\n<a name='Среднее-и-медиана-в-центре-для-цены-выше-почти-в-2-раза--чем-во-всем-датафрейме-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n\n- Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме. \n\n<a name='Общая-площадь-в-центре-больше--чем-во-всем-датафрейме-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n\n- Общая площадь в центре больше, чем во всем датафрейме.\n\n<a name='Высота-потолков-в-центре-больше--чем-во-всем-датафрейме'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n\n- Высота потолков в центре больше, чем во всем датафрейме\n\n<a name='В-центре-меньше-балконов--чем-во-всем-датафрейме-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- В центре меньше балконов, чем во всем датафрейме.\n\n**Наблюдения:**      \n- В центре больше парков.\n\n**Наблюдения:**      \n- В центре объявления дольше находятся в экспозиции.\n\n<a name='В-центре-меньше-эконома-и-больше-премиум-квартир-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- В центре меньше эконома и больше премиум квартир.  \n\nПосмотрим на цену квадратного метра в 10 населенных пунктах с наибольшим количеством объявлений.  \n\nПосмотрим на среднюю цену квадратного метра в этих населённых пунктах.\n\n<a name='Санкт--Петербург--Пушкин-и-деревня-Кудрово-имеют-самую-большую-цену-квадратного-метра-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.  \n\n### 4.7 Промежуточный вывод<a name='4-7-Промежуточный-вывод'></a>\n\n- Сильная положительная корреляция между жилой площадью и общей площадью\n- Сильная положительная корреляция между числом комнат и общей площадью\n- Сильная положительная корреляция между числом комнат и жилой площадью\n- Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади\n- Умеренная положительная корреляция между площадью кухни и общей площадью\n- Умеренная положительная корреляция между ценой и общей площадью\n- Умеренная положительная корреляция между ценой и жилой площадью\n- Умеренная положительная корреляция между ценой и площадью кухни\n- Умеренная положительная корреляция между ценой и жилой площадью\n- Общая площадь является самым значимым признаком для предсказания цены квартиры. Число дней экспозиции находится на втором месте. \n- С ростом цены растет общая площадь, жилая площадь и площадь кухни.\n- Есть небольшая зависимость между ценой и количеством этажей. Чем больше цена, тем меньше этажей.  \nЭто скорее всего связано с тем, что старые дома имеют меньше этажей и загородные дома имеют также меньше этажей.\n- Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.\n- Чем больше число комнат, тем больше общая площадь.  \n- Чем больше число комнат, тем больше жилая площадь.  \n- В воскресенье и субботу меньше всего публикаций\n- Больше всего объявлений со средней удаленностью от центра.\n- Есть тренд на увеличение количества фотографий по годам.\n- Медианная цена квартиры не сильно изменяется со временем\n- Медианная площадь квартир не сильно меняется со временем\n- Медианная стоимость квадратного метра практически не меняется со временем\n- В премиуме среднее количество комнат больше на всех этажах\n- У премиум площадь квартир больше на всех этажах\n- В центре медианная стоимость квартир выше\n- В центре медианная площадь квартир больше\n- В центре медианное количество комнат больше\n- В центре медианная высота потолков выше.\n- Самые высокие дома находятся на средней удаленности от центра\n- В центре медианное количество дней экспозиции больше. \n- Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме. \n- Общая площадь в центре больше, чем во всем датафрейме.\n- Высота потолков в центре больше, чем во всем датафрейме\n- В центре меньше балконов, чем во всем датафрейме.\n- В центре объявления дольше находятся в экспозиции.\n- В центре меньше эконома и больше премиум квартир.  \n- Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.  \n\n\n## 5. Формулирование и провера гипотез<a name='5--Формулирование-и-провера-гипотез'></a>\n\n### 5.1 Формулирование гипотез<a name='5-1-Формулирование-гипотез'></a>\n\nНа основе проведенного анализа данных сформулируем следующие гипотезы:\n\nГипотеза 1: Нет зависимости между количеством публикаций и днем недели.  \nГипотеза 2: Удаленность от центра не влияет на количество публикаций.  \nГипотеза 3: Площадь квартир не зависит от времени.  \nГипотеза 4: Площадь квартиры не зависит от ценового сегмента.  \nГипотеза 5: Количество дней экспозиции не зависит от удаленности от центра.   \n\n### 5.2 Проверка гипотез<a name='5-2-Проверка-гипотез'></a>\n\nПроверим сформулированные гипотезы.\n\n**Гипотеза 1: Нет зависимости между количеством публикаций и днем недели.**  \n\nH0: День недели не влияет на количество объявлений  \nH1: День недели влияет на количество объявлений\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что есть зависимость между количеством публикаций и днем недели подтвердилась.  \n\n**Гипотеза 2: Удаленность от центра не влияет на количество публикаций.**  \n\nH0: Удаленность от центра не влияет на количество объявлений  \nH1: Удаленность от центра влияет на количество объявлений\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что удаленность от центра влияет на количество публикаций, подтвердилась.  \n\n**Гипотеза 3: Площадь квартир не зависит от времени.**  \n\nH0: Площадь квартир не зависит от времени.  \nH1: Площадь квартир зависит от времени.  \n\nПосмотрим на распределение площади квартир.  \n\nТак как у нас не нормальное распределение, то используем непараметрический критерий Краскела-Уоллиса.\n\nУровень значимости alpha выберем 0.05\n\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что площадь квартир не зависит от времени, не подтвердилась.  \nНужно учесть, что в одной из групп меньше 30 элементов. Есть основания не доверять результатам.\n\n\n**Гипотеза 4: Площадь квартиры не зависит от ценового сегмента.**  \n\nH0: Площадь квартиры не зависит от ценового сегмента.  \nH1: Площадь квартиры зависит от ценового сегмента.  \n\nТак как у нас не нормальное распределение, то используем непараметрический критерий Краскела-Уоллиса.\n\nУровень значимости alpha выберем 0.05\n\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что площадь квартиры зависит от ценового сегмента, подтвердилась.    \n\n**Гипотеза 5: Количество дней экспозиции не зависит от удаленности от центра.**  \n\nH0: Количество дней экспозиции не зависит от удаленности от центра.  \nH1: Количество дней экспозиции зависит от удаленности от центра.  \n\nПосмотрим на распределение количества дней экспозиции.\n\nТак как у нас не нормальное распределение, то используем непараметрический критерий Краскела-Уоллиса.\n\nУровень значимости alpha выберем 0.05\n\n\nТак как у нас есть пропуски, то для проведения теста их удалим.  \nБудем полагать, что пропуски носят случайный характер и не повлияют на результат теста.  \n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что количество дней экспозиции зависит от удаленности от центра, подтвердилась.  \n\n\n### 5.3 Промежуточный вывод<a name='5-3-Промежуточный-вывод'></a>\n\n- На уровне значимости 0.05 гипотеза, что есть зависимость между количеством публикаций и днем недели подтвердилась.  \n- На уровне значимости 0.05 гипотеза, что удаленность от центра влияет на количество публикаций, подтвердилась.  \n- На уровне значимости 0.05 гипотеза, что площадь квартир не зависит от времени, не подтвердилась.  \nНужно учесть, что в одной из групп меньше 30 элементов. Есть основания не доверять результатам.\n- На уровне значимости 0.05 гипотеза, что площадь квартиры зависит от ценового сегмента, подтвердилась.   \n- На уровне значимости 0.05 гипотеза, что количество дней экспозиции зависит от удаленности от центра, подтвердилась.  \n\n## 6. Общий вывод<a name='6--Общий-вывод'></a>\n\n**Выводы:**  \n- Сильная положительная корреляция между жилой площадью и общей площадью  \n- Сильная положительная корреляция между числом комнат и общей площадью  \n- Сильная положительная корреляция между числом комнат и жилой площадью  \n- Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади  \n- Умеренная положительная корреляция между площадью кухни и общей площадью  \n- Умеренная положительная корреляция между ценой и общей площадью  \n- Умеренная положительная корреляция между ценой и жилой площадью  \n- Умеренная положительная корреляция между ценой и площадью кухни  \n- Умеренная положительная корреляция между ценой и жилой площадью  \n- Общая площадь является самым значимым признаком для предсказания цены квартиры. Число дней экспозиции находится на втором месте.   \n- Есть небольшая зависимость между ценой и количеством этажей. Чем больше цена, тем меньше этажей.    \nЭто скорее всего связано с тем, что старые дома имеют меньше этажей и загородные дома имеют также меньше этажей.  \n- Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.  \n- В среднем объявление находится в продаже 180 дней.  \n- Чем больше число комнат, тем больше общая площадь.    \n- Чем больше число комнат, тем больше жилая площадь.    \n- В воскресенье и субботу меньше всего публикаций  \n- Больше всего объявлений со средней удаленностью от центра.  \n- Есть тренд на увеличение количества фотографий по годам.  \n- Медианная цена квартиры не сильно изменяется со временем  \n- Медианная площадь квартир не сильно меняется со временем  \n- Медианная стоимость квадратного метра практически не меняется со временем  \n- В премиуме среднее количество комнат больше на всех этажах  \n- У премиум площадь квартир больше на всех этажах  \n- В центре медианная стоимость квартир выше  \n- В центре медианная площадь квартир больше  \n- В центре медианное количество комнат больше  \n- В центре медианная высота потолков выше.  \n- Самые высокие дома находятся на средней удаленности от центра  \n- В центре медианное количество дней экспозиции больше.   \n- Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме.   \n- Общая площадь в центре больше, чем во всем датафрейме.  \n- Высота потолков в центре больше, чем во всем датафрейме  \n- В центре меньше балконов, чем во всем датафрейме.  \n- В центре объявления дольше находятся в экспозиции.  \n- В центре меньше эконома и больше премиум квартир.    \n- Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.    \n\n**Аномалии и особенности в данных:**  \n- Минимальное значение цены 12 190 является аномальным.  \n- В высоте потолков есть пропуски (39 процентов)  \n- В высоте потолков много выбросов. Есть значение 100.  \n- В количестве этажей есть пропуски (меньше 1 процента)  \n- В жилой площади 8 процентов пропусков.  \n- В площади кухни 10 процентов пропусков.    \n- В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.    \n- В расстоянии до ближайшего аэропорта 23 процента пропусков.  \n- В расстоянии до центр города 23 процента пропусков.   \n- В колонке с количеством парков рядом 23 процента пропусков.    \n- В колонке с расстоянием до ближайшего парка 66 процентов пропусков.    \n- В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.    \n- В колонке с расстоянием до ближайшего пруда 62 процента пропусков.   \n- В колонке с количеством дней экспозиции 13 процентов пропусков.   \n- В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.    \n- В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)  \n- Пропуски в колонках с количеством парков рядом, количеством прудов рядом,  \nрасстоянием до центра, расстоянием до аэропорта совпадают.  \n- Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом.  \n- В количестве этаже пропуски зависят от признака является ли квартира студией.    \n- Почти все пропуски в квартирах, которые не являются студиями, даже учитывая общее количество пропорций.  \n- В студиях в поле площадь кухни одни пропуски.  \n\n**Результаты предобработки данных:**  \n- Мы выяснили, что 0 комнат указано у студий, либо в открытой планировке, либо у квартир с площадью до 40 кв.,  \nпоэтому нули в количестве комнат заменили на 1.  \n- В цене была одна запись со значением 12190. Скорее всего не поставили нули, но сложно определить сколько именно нулей не поставили.  \nТак как это всего 1 запись, то удалили ее. \n- Удалили 36 записей (0.2%) с высотой потолка больше 5 метров. Так как таких записей мало, а замена их может исказить анализ.  \n- В количестве этажей пропуски удалили, так как определить реальный этаж невозможно, а пропусков мало.  \n- Пропуски в жилой площади и в площади кухни обработали с помощью коэффициентов отношения площадей.  \nПри этом расчеты провели с учетом количества комнат, чтобы было точнее.  \n\n**Результаты проверки гипотез:**  \n- Гипотеза 1: Нет зависимости между количеством публикаций и днем недели.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 2: Удаленность от центра не влияет на количество публикаций.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 3: Площадь квартир не зависит от времени.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 4: Площадь квартиры не зависит от ценового сегмента.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 5: Количество дней экспозиции не зависит от удаленности от центра.   \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n\n\n**Рекомендации:**  \n- Добавить контроль ввода слишком больших и слишком маленьких значений для цены, высоты потолка.  \n- Добавить контроль ввода для количества комнат, чтобы исключить ввод нулевых значений.  \n- Выяснить почему пропуски в колонках с количеством парков рядом, количеством прудов рядом,  \nрасстоянием до центра, расстоянием до аэропорта в одних и тех же строках.  \n","srcMarkdownNoYaml":"\n\n\n\n\n\n\n\n\n**Автор:**  \nГригорьев Павел   \n\n**Описание проекта:**  \nПроект направлен на исследование факторов, влияющих на ценообразование на рынке недвижимости в Санкт-Петербурге.  \nВ ходе проекта будут выявлены ключевые параметры, которые определяют стоимость квартир.  \nПолученные знания будут использованы для создания системы, которая будет отслеживать аномалии и предупреждать о возможных случаях мошенничества.\n\n**Цель:**    \nВыявить ключевые параметры, определяющие стоимость квартир, и разработать рекомендации для создания системы мониторинга,   \nкоторая поможет выявлять аномалии в ценах и предупреждать о мошенничестве на рынке недвижимости.\n\n**Источники данных:**  \nДанные сервиса Яндекс.Недвижимость — архив объявлений о продаже квартир в Санкт-Петербурге и соседних населённых пунктах за несколько лет.\n\n**Условия проведения анализа данных:**  \n\n\nДля анализ будут использоваться данные с 27 ноября 2014 по 3 мая 2019 года\n\n**Главные выводы:**<a name=\"ref-to-conclusions\"></a>  \n- <a href='#В-среднем-объявление-находится-в-продаже-180-дней-'>В среднем объявление находится в продаже 180 дней.</a>  \n- <a href='#Сильная-положительная-корреляция-между-жилой-площадью-и-общей-площадью'>Сильная положительная корреляция между жилой площадью и общей площадью</a>  \n- <a href='#Сильная-положительная-корреляция-между-числом-комнат-и-общей-площадью'>Сильная положительная корреляция между числом комнат и общей площадью</a>  \n- <a href='#Сильная-положительная-корреляция-между-числом-комнат-и-жилой-площадью'>Сильная положительная корреляция между числом комнат и жилой площадью</a>  \n- <a href='#Сильная-отрицательная-корреляция-между-отношением-площади-кухни-к-общей-площади-и-отношением-жилой-площади-к-общей-площади'>Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади</a>  \n- <a href='#Общая-площадь-является-самым-значимым-признаком-для-предсказания-цены-квартиры--Число-дней-экспозиции-находится-на-втором-месте-'>Общая площадь является самым значимым признаком для предсказания цены квартиры. Число дней экспозиции находится на втором месте.</a>  \n- <a href='#Можно-заметить--что-чем-ближе-к-центру-или-парку--тем-дороже-стоит-квартира-'>Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.</a>  \n- <a href='#Чем-больше-число-комнат--тем-больше-общая-площадь-'>Чем больше число комнат, тем больше общая площадь.</a>  \n- <a href='#Чем-больше-число-комнат--тем-больше-жилая-площадь-'>Чем больше число комнат, тем больше жилая площадь.</a>  \n- <a href='#В-воскресенье-и-субботу-меньше-всего-публикаций'>В воскресенье и субботу меньше всего публикаций</a>  \n- <a href='#Есть-тренд-на-увеличение-количества-фотографий-по-годам-'>Есть тренд на увеличение количества фотографий по годам.</a>  \n- <a href='#В-премиуме-среднее-количество-комнат-больше-на-всех-этажах'>В премиуме среднее количество комнат больше на всех этажах</a>  \n- <a href='#У-премиум-площадь-квартир-больше-на-всех-этажах'>У премиум площадь квартир больше на всех этажах</a>  \n- <a href='#В-центре-медианная-стоимость-квартир-выше'>В центре медианная стоимость квартир выше</a>  \n- <a href='#В-центре-медианная-площадь-квартир-больше'>В центре медианная площадь квартир больше</a>  \n- <a href='#В-центре-медианное-количество-комнат-больше'>В центре медианное количество комнат больше</a>  \n- <a href='#В-центре-медианная-высота-потолков-выше-'>В центре медианная высота потолков выше.</a>  \n- <a href='#В-центре-медианное-количество-дней-экспозиции-больше-'>В центре медианное количество дней экспозиции больше.</a>  \n- <a href='#Среднее-и-медиана-в-центре-для-цены-выше-почти-в-2-раза--чем-во-всем-датафрейме-'>Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме.</a>  \n- <a href='#Общая-площадь-в-центре-больше--чем-во-всем-датафрейме-'>Общая площадь в центре больше, чем во всем датафрейме.</a>  \n- <a href='#Высота-потолков-в-центре-больше--чем-во-всем-датафрейме'>Высота потолков в центре больше, чем во всем датафрейме</a>  \n- <a href='#В-центре-меньше-балконов--чем-во-всем-датафрейме-'>В центре меньше балконов, чем во всем датафрейме.</a>  \n- <a href='#В-центре-меньше-эконома-и-больше-премиум-квартир-'>В центре меньше эконома и больше премиум квартир.</a>  \n- <a href='#Санкт--Петербург--Пушкин-и-деревня-Кудрово-имеют-самую-большую-цену-квадратного-метра-'>Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.</a>  \n\n\n**Аномалии и особенности в данных:**<a name=\"ref-to-anomalies\"></a>  \n- <a href='#Минимальное-значение-цены-12-190-является-аномальным-'>Минимальное значение цены 12 190 является аномальным.</a>  \n- <a href='#В-высоте-потолков-есть-пропуски--39-процентов-'>В высоте потолков есть пропуски (39 процентов)</a>  \n- <a href='#В-высоте-потолков-много-выбросов--Есть-значение-100-'>В высоте потолков много выбросов. Есть значение 100.</a>  \n- <a href='#В-количестве-этажей-есть-пропуски--меньше-1-процента-'>В количестве этажей есть пропуски (меньше 1 процента)</a>  \n- <a href='#В-жилой-площади-8-процентов-пропусков-'>В жилой площади 8 процентов пропусков.</a>  \n- <a href='#В-площади-кухни-10-процентов-пропусков-'>В площади кухни 10 процентов пропусков.</a>  \n- <a href='#В-числе-балконов-49-процентов-пропусков--Скорее-всего-пропуски-это-отсутствие-балкона-'>В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.</a>  \n- <a href='#В-расстоянии-до-ближайшего-аэропорта-23-процента-пропусков-'>В расстоянии до ближайшего аэропорта 23 процента пропусков.</a>  \n- <a href='#В-расстоянии-до-центр-города-23-процента-пропусков-'>В расстоянии до центр города 23 процента пропусков.</a>  \n- <a href='#В-колонке-с-количеством-парков-рядом-23-процента-пропусков-'>В колонке с количеством парков рядом 23 процента пропусков.</a>  \n- <a href='#В-колонке-с-расстоянием-до-ближайшего-парка-66-процентов-пропусков-'>В колонке с расстоянием до ближайшего парка 66 процентов пропусков.</a>  \n- <a href='#В-колонке-с-количеством-прудов-23-процента-пропусков--скорее-всего-это-отсутствие-парков-'>В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.</a>  \n- <a href='#В-колонке-с-расстоянием-до-ближайшего-пруда-62-процента-пропусков-'>В колонке с расстоянием до ближайшего пруда 62 процента пропусков.</a>  \n- <a href='#В-колонке-с-количеством-дней-экспозиции-13-процентов-пропусков-'>В колонке с количеством дней экспозиции 13 процентов пропусков.</a>  \n- <a href='#В-колонке-с-признаком-является-ли-квартира-апартаментом-88-процентов-пропусков--Скорее-всего-эти-квартиры-не-являются-апартаментами-'>В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.</a>  \n- <a href='#В-колонке-с-названием-населенного-пункта-49-пропущенных-значений--меньше-1-процента-'>В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)</a>  \n- <a href='#Пропуски-в-колонках-с-количеством-парков-рядом--количеством-прудов-рядом-'>Пропуски в колонках с количеством парков рядом, количеством прудов рядом,</a>  \n- <a href='#Пропуски-в-количестве-этажей-совпадают-с-пропусками-в-признаке-является-ли-квартира-апартаментом'>Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом</a>  \n- <a href='#В-количестве-этаже-пропуски-зависят-от-признака-является-ли-квартира-студией-'>В количестве этаже пропуски зависят от признака является ли квартира студией.</a>  \n\n\n**Рекомендации:**  \n- Добавить контроль ввода слишком больших и слишком маленьких значений для цены, высоты потолка.  \n- Добавить контроль ввода для количества комнат, чтобы исключить ввод нулевых значений.  \n- Выяснить почему пропуски в колонках с количеством парков рядом, количеством прудов рядом,  \nрасстоянием до центра, расстоянием до аэропорта в одних и тех же строках.  \n\n## Загрузка библиотек<a name='1--Загрузка-библиотек'></a>\n\n## 1. Описание и изучение данных<a name='1--Описание-и-изучение-данных'></a>\n\n### 1.1 Описание данных<a name='1-1-Описание-данных'></a>\n\nПо каждой квартире на продажу доступны два вида данных. Первые вписаны пользователем, вторые — получены автоматически на основе картографических данных.  \nНапример, расстояние до центра, аэропорта, ближайшего парка и водоёма.\n\n- airports_nearest - расстояние до ближайшего аэропорта в метрах (м)\n- balcony - число балконов\n- ceiling_height - высота потолков (м)\n- cityCenters_nearest - расстояние до центра города (м)\n- days_exposition - сколько дней было размещено объявление (от публикации до снятия)\n- first_day_exposition - дата публикации\n- floor - этаж\n- floors_total - всего этажей в доме\n- is_apartment - апартаменты (булев тип)\n- kitchen_area - площадь кухни в квадратных метрах (м²)\n- last_price - цена на момент снятия с публикации\n- living_area - жилая площадь в квадратных метрах(м²)\n- locality_name - название населённого пункта\n- open_plan - свободная планировка (булев тип)\n- parks_around3000 - число парков в радиусе 3 км\n- parks_nearest - расстояние до ближайшего парка (м)\n- ponds_around3000 - число водоёмов в радиусе 3 км\n- ponds_nearest - расстояние до ближайшего водоёма (м)\n- rooms - число комнат\n- studio - квартира-студия (булев тип)\n- total_area - площадь квартиры в квадратных метрах (м²)\n- total_images - число фотографий квартиры в объявлении\n\n### 1.2 Изучение данных<a name='1-2-Изучение-данных'></a>\n\n#### 1.2.1 Изучение переменных<a name='2-2-1-Изучение-переменных'></a>\n\nОставим тип float, так как у нас пропуски в данных и мы не можем преобразовать нужные столбцы в int\n\nИзучим каждую колонку отдельно\n\n**Наблюдения:**\n\n- Полных дубликатов в датафрейме нет\n\n**Наблюдения:**    \n \n- В колонке с датой пропущенных значений нет.\n- Нет пропущенных годов и месяцев.\n- 8 процентов дней пропущено\n\n**Наблюдения:**      \n\n- В колонке с количеством фотографий пропусков нет\n- 4 процента записей с нулями, это нормально, поскольку у части объявлений нет изображений.\n- Максимальное количество фотографий 50. Это многовато, нужно будет это проверить.\n- Медианное значение 9, похоже на правду.\n- 7 процентов записей имеют 20 фотографий. \n\n<a name='Минимальное-значение-цены-12-190-является-аномальным-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В цене есть выбросы.\n- Минимальное значение цены 12 190 и максимальное значение 763 млн выглядят подозрительно.\n\n**Наблюдения:**  \n  \n- Максимальная площадь в 900 квадратов.\n- Также нужно проверить площадь 12 квадратов\n\n**Наблюдения:**    \n\n- Есть квартиры с 0 комнат, возможно так обозначили студии.\n- Максимальное количество комнат 19 нужно изучить.\n- Треть квартир с 1 комнатой и треть квартир с двумя комнатами. Четверть с 3 комнатами.\n- Квартир с 4 и более команд около 6 процентов.\n\n<a name='В-высоте-потолков-есть-пропуски--39-процентов-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a><a name='В-высоте-потолков-много-выбросов--Есть-значение-100-'></a>\n\n**Наблюдения:**    \n\n- В высоте потолков пропуски (39 процентов)\n- Явный выброс 100 в высоте потолков.\n\n<a name='В-количестве-этажей-есть-пропуски--меньше-1-процента-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В количестве этажей есть пропуски (меньше 1 процента)\n- Максимальное количество этаже 60 нужно проверить.\n- Больше всего пятиэтажек (25 процентов)\n\n<a name='В-жилой-площади-8-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В жилой площади 8 процентов пропусков.\n- Нужно проверить минимальную и максимальную жилую площади.\n\n**Наблюдения:**    \n\n- Больше всего квартир с 1 по 5 этаж. Это логично, учитывая, что у нас больше всего пятиэтажек.\n\n<a name='В-площади-кухни-10-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В площади кухни 10 процентов пропусков.  \n- Нужно проверить опять же максимальные и минимальные кухонные площади.\n\n<a name='В-числе-балконов-49-процентов-пропусков--Скорее-всего-пропуски-это-отсутствие-балкона-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.  \n- Треть квартир без балконов, также по трети квартир с 1 и 2 балконами.\n\n<a name='В-расстоянии-до-ближайшего-аэропорта-23-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В расстоянии до ближайшего аэропорта 23 процента пропусков.\n- 1 нулевое значение \n\n<a name='В-расстоянии-до-центр-города-23-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В расстоянии до центр города 23 процента пропусков. \n\n<a name='В-колонке-с-количеством-парков-рядом-23-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с количеством парков рядом 23 процента пропусков.  \n\n<a name='В-колонке-с-расстоянием-до-ближайшего-парка-66-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с расстоянием до ближайшего парка 66 процентов пропусков.  \n\n\n<a name='В-колонке-с-количеством-прудов-23-процента-пропусков--скорее-всего-это-отсутствие-парков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.  \n\n<a name='В-колонке-с-расстоянием-до-ближайшего-пруда-62-процента-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с расстоянием до ближайшего пруда 62 процента пропусков. \n\n<a name='В-среднем-объявление-находится-в-продаже-180-дней-'></a>\n<a name='В-колонке-с-количеством-дней-экспозиции-13-процентов-пропусков-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В среднем объявление находится в продаже 180 дней, но из за выбросов оно не совсем точно описывает ситуацию.\n- Лучше использовать медиану. Она составляет 95 дней. \n- Чаще всего объявления находятся в продаже 45 дней. \n- В колонке с количеством дней экспозиции 13 процентов пропусков. \n- Максимальное значение в 1580 дней похоже на выброс.\n\n<a name='В-колонке-с-признаком-является-ли-квартира-апартаментом-88-процентов-пропусков--Скорее-всего-эти-квартиры-не-являются-апартаментами-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.  \n\n**Наблюдения:**    \n\n- Студий меньше 1 процента. \n\n**Наблюдения:**    \n\n- Почти все квартиры с открытой планировкой.\n\n<a name='В-колонке-с-названием-населенного-пункта-49-пропущенных-значений--меньше-1-процента-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)\n\n#### 1.2.2 Изучение дубликатов<a name='1-2-2-Изучение-дубликатов'></a>\n\nПосмотрим на дубли во всем датафрейме\n\nПолных дубликатов у нас нет.\n\nПосмотрим сколько у нас дублей в каждой колонке\n\nУ нас нет столбцов, в которых данные должны быть уникальны, поэтому проверять на дубли нечего.\n\n#### 1.2.3 Изучение пропусков<a name='1-2-3-Изучение-пропусков'></a>\n\nПосмотрим на столбцы, в которых есть пропуски.\n\nУ нас есть пропуски в площадях. Посмотрим как они распределены.\n\nПосмотрим есть ли пропуски сразу во всех площадях. \n\nПропусков одновременно во всех столбцах с площадями нет.  \nПосмотрим на строки датафрейма, где пропуски во всех площадях.  \n\nУ нас нет пропусков в общей площади. Поэтому мы сможем заменить значения пропусков в площади кухни и жилой площади.  \n\nМожно заметить, что количество пропусков в колонке с количеством парков рядом, количеством прудов рядом совпадает,\nрасстоянием до центра, расстоянием до аэропорта примерно равны.\nВыдвигаем гипотезу, что пропуски в одних и тех же строках в обоих столбцах.  \n\nПосмотрим сколько пропусков в обоих колонках вместе\n\n<a name='Пропуски-в-колонках-с-количеством-парков-рядом--количеством-прудов-рядом-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Гипотеза подтвердилась**:\n- Пропуски в одних и тех же строках в колонках с количеством парков рядом, количеством прудов рядом совпадает,\nрасстоянием до центра, расстоянием до аэропорта примерно равны\n\nПосмотрим как распределены пропуски по категориям в строках, где пропуски одновременно в этих столбцах.  \n\n**Наблюдения:**    \n\n- Явных зависимостей от категорий не обнаружено\n\nИзучим пропуски по категориям\n\n<a name='Пропуски-в-количестве-этажей-совпадают-с-пропусками-в-признаке-является-ли-квартира-апартаментом'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом.\n\n<a name='В-количестве-этаже-пропуски-зависят-от-признака-является-ли-квартира-студией-'></a>\n<a href=\"#ref-to-anomalies\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В количестве этаже пропуски зависят от признака является ли квартира студией.  \n- Почти все пропуски в квартирах, которые не являются студиями, даже учитывая общее количество пропорций.\n\n**Наблюдения:**    \n\n- В студиях в поле площадь кухни одни пропуски.\n\n**Наблюдения:**   \n\n- В студиях в поле площадь кухни одни пропуски. \n\n#### 1.2.4 Изучение выбросов<a name='1-2-4-Изучение-выбросов'></a>\n\nСначала изучим потенциальные выбросы, которые мы выявили при изучении колонок.  \n\nИзучим выброс с ценой 12190.0\n\n**Наблюдения**:  \n- Ничего особенно не обнаружено.  \n- Скорее всего ошиблись не поставили нули.\n\nПосмотрим на выбросы с площадью квартиры. \n\n**Наблюдения**:  \n- Не похоже на выбросы. Цена большая, количество комнат большое. Скорее всего просто большие дорогие квартиры. \n\n**Наблюдения**:  \n- Не похоже на выбросы. Скорее всего это мелко нарезанные студии. Тем более этаж низкий.\n\nИзучим выброс в высоте потолка.  \n\n**Наблюдения**:  \n- Значения от 20 до 32 скорее всего поставили не там запятую.  \n- А вот значения 10 и 100 странные.\n\nИзучим выбросы в количестве этажей\n\n**Наблюдения**:  \n- Так как в Санкт-Петербург\tесть здания такой высоты, то нет оснований считать это выбросами. \n\n#### 1.2.5 Изучение отрицательных значений<a name='1-2-5-Изучение-отрицательных-значений'></a>\n\nИзучаем отрицательные значения\n\nУ нас нет отрицательных значений. \n\n#### 1.2.6 Изучение нулевых значений<a name='1-2-6-Изучение-нулевых-значений'></a>\n\nИзучаем нулевые значения\n\nВсе кроме количества комнат и расстояния до ближайшего аэропорта может быть нулями, поэтому удалим их из текущего изучения.  \n\nПосмотрим отдельно на нулевое значение в расстоянии до аэропорта.  \n\nВыдвинем гипотезу, что 0 комнат у студий и однокомнатных.  \nПроверим гипотезу по площади.  \nПредположим, что площадь студий и однокомнатных квартир составляет не более 40 м2.\n\nПосмотрим на выборку из датафрейма\n\n**Наблюдения:**      \n\n- Видим, что почти все квартиры с 0 комнат имеют площадь до 40 кв. \n- 2 квартиры имеют открытую планировку  \n- Можно будет заменить 0 на 1.\n\n**Наблюдения**:  \n- Большая часть квартир с нулем комнат являются студиями.\n\n### 1.3 Промежуточный вывод<a name='1-3-Промежуточный-вывод'></a>\n\n- 8 процентов дней пропущено\n- Минимальное значение цены 12 190 и максимальное значение 763 млн выглядят подозрительно.\n- Максимальная площадь в 900 квадратов.\n- В высоте потолков пропуски (39 процентов)\n- В высоте потолков много выбросов. Есть значение 100.\n- В количестве этажей есть пропуски (меньше 1 процента)\n- Больше всего пятиэтажек (25 процентов)\n- В жилой площади 8 процентов пропусков.\n- В площади кухни 10 процентов пропусков.  \n- В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.  \n- Треть квартир без балконов, также по трети квартир с 1 и 2 балконами.\n- В расстоянии до ближайшего аэропорта 23 процента пропусков.\n- В расстоянии до центр города 23 процента пропусков. \n- В колонке с количеством парков рядом 23 процента пропусков.  \n- В колонке с расстоянием до ближайшего парка 66 процентов пропусков.  \n- В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.  \n- В колонке с расстоянием до ближайшего пруда 62 процента пропусков. \n- В среднем объявление находится в продаже 180 дней, но из за выбросов оно не совсем точно описывает ситуацию.\n- В колонке с количеством дней экспозиции 13 процентов пропусков. \n- В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.  \n- В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)\n- Пропуски в одних и тех же строках в колонках с количеством парков рядом, количеством прудов рядом совпадает,\nрасстоянием до центра, расстоянием до аэропорта примерно равны\n- Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом.\n- В количестве этаже пропуски зависят от признака является ли квартира студией.  \n- Почти все пропуски в квартирах, которые не являются студиями, даже учитывая общее количество пропорций.\n- В студиях в поле площадь кухни одни пропуски.\n\n## 2. Предобработка данных<a name='2--Предобработка-данных'></a>\n\n### 2.1 Выбор нужных столбцов для дальнейшей работы<a name='2-1-Выбор-нужных-столбцов-для-дальнейшей-работы'></a>\n\nСохраним исходный датафрейм в переменную df_origin, чтобы была возможность вернуться к нему\n\n\n### 2.2 Обработка выбросов<a name='2-2-Обработка-выбросов'></a>\n\nПосле изучения данных отрицательные значения не обнаружены, но есть колонки с нулевыми значениями, где их быть не должно.  \n\nПосмотрим где у нас нулевые значения\n\nНам нужно обработать нули в количестве комнат и в расстоянии до аэропорта. \n\nТак как это всего одна запись и точно восстановить расстояние невозможно, то лучше удалить ее.  \n\nОбработаем нулевые значения в количестве комнат.\n\nТак как мы выяснили, что 0 комнат указано у студий и в открытой планировке, либо у квартир с площадью до 40 кв.,  \nто заменим 0 на 1.  \n\nУбедимся, что у нас не осталось нулевых и отрицательных значений где их быть не должно.  \n\nУ нас в цене есть одна запись со значением 12190.\nСкорее всего не поставили нули, но сложно определить сколько именно нулей не поставили.  \nТак как это всего 1 запись, то удалим ее. \n\nОбработаем выбросы в высоте потолков. \n\nБудем считать, что высота потолков больше 5 метров является маловероятным.  \nПосмотрим сколько у нас записей с высотой потолка больше 5 метров.  \n\nТак как их очень мало и мы не можем обработать эти выбросы, то удалим их.  \n\n### 2.3 Обработка пропусков<a name='2-3-Обработка-пропусков'></a>\n\nПосмотрим где у нас пропуски.  \n\nМы выяснили, что у нас пропуски в столбцах 'airports_nearest', 'center', 'around 3000', 'around 3000'  \nв одних и тех же строчках.    \nТак как количество пропусков большое, то заменять их нельзя.  \nПоэтому оставим их как есть. \n\nПропуски в высоте потолков мы обрабатывать не можем, так как их сильно много.  \n\nПропуски в количестве этажей удалим, так как их мало.  \n\nПропуски в жилой площади и в площади кухни обработаем с помощью коэффициентов отношения площадей.  \nПри этом рассчитывать будем с учетом количества комнат, чтобы было точнее.  \n\nПризнак является ли квартира апартаментом имеет много пропусков.  \nОпределить является ли квартира апартаментом мы не можем, поэтому заменим на значение \"не указано\".\n\nПропуски в названии населенного пункта мы заменить не можем, и их очень мало, поэтому удалим их.\n\nОстальные пропуски оставим как есть, чтобы не исказить данные.  \n\n### 2.4 Приведение данных к удобной форме<a name='2-4-Приведение-данных-к-удобной-форме'></a>\n\nИзменим значения в столбцах на более удобные\n\nИзменим типы данных на более подходящие.\n\nУбедимся, что у нас нет дробных чисел в цене.  \n\nПриведем цену к целому типу.  \n\n### 2.5 Промежуточный вывод<a name='2-5-Промежуточный-вывод'></a>\n\n- Мы выяснили, что 0 комнат указано у студий, либо в открытой планировке, либо у квартир с площадью до 40 кв.,  \nпоэтому нули в количестве комнат заменили на 1.\n- В цене была одна запись со значением 12190. Скорее всего не поставили нули, но сложно определить сколько именно нулей не поставили.  \nТак как это всего 1 запись, то удалили ее. \n- Удалили 36 записей (0.2%) с высотой потолка больше 5 метров. Так как таких записей мало, а замена их может исказить анализ.  \n- В высоте потолка пропусков слишком много, поэтому их не стали трогать.  \n- В количестве этажей пропуски удалили, так как определить реальный этаж невозможно, а пропусков мало.  \n- Пропуски в жилой площади и в площади кухни обработали с помощью коэффициентов отношения площадей.  \nПри этом расчеты провели с учетом количества комнат, чтобы было точнее.  \n- Признак является ли квартира апартаментом имеет много пропусков.  \nОпределить является ли квартира апартаментом мы не можем, поэтому заменили на значение \"не указано\".\n- Удалили пропуски в названии населенных пунктов, так как их мало.  \n\n## 3. Обогащение данных и создание новых переменных<a name='3--Обогащение-данных-и-создание-новых-переменных'></a>\n\n### 3.1 Создание новых числовых переменных<a name='3-1-Создание-новых-числовых-переменных'></a>\n\nСоздадим переменную соотношение жилой и общей площади\n\nСоздадим переменную отношения площади кухни к общей.\n\nСоздадим переменную цена квадратного метра\n\nСоздадим новую переменную - расстояние до центра километрах.\n\n### 3.2 Категоризация данных<a name='3-2-Категоризация-данных'></a>\n\nСоздадим новую категориальную переменную из этажа.  \nСделаем 3 значения - первый, последний и другой\n\nСоздадим новую категориальную переменную из цены\n\nСоздадим переменные день недели, месяц и год публикации объявления.\n\nСоздадим новую категориальную переменную месяц-год\n\nСоздадим новую категориальную переменную из расстояния до центра.   \nЧтобы определить границы зон, построим график зависимости цены от расстояния до центра.\n\nМожно заметить, что на 5 км от центра падение цены замедляется.  \nВыберем 5 км как границу для центра.   \nИ выберем 20 км как зону окраины\n\n\n### 3.3 Промежуточный вывод<a name='3-3-Промежуточный-вывод'></a>\n\n- Создали переменную соотношение жилой и общей площади\n- Создали переменную отношения площади кухни к общей.\n- Создали переменную цена квадратного метра\n- Создали новую переменную - расстояние до центра километрах.\n- Создадим новую категориальную переменную позиция этажа. Сделали 3 значения - первый, последний и другой\n- Из цены создали новую категориальную переменную - сегмент цены. Сделали 3 значения - эконом, комфорт, премиум.  \n- Создали переменные день недели, месяц, год и месяц-год публикации объявления.\n- Создали новую категориальную переменную из расстояния до центра. Сделали значения - центр, окраина, средняя удаленность\n\n## 4. Визуализация взаимосвязей переменных<a name='4--Визуализация-взаимосвязей-переменных'></a>\n\n### 4.1 Исследование корреляционных связей<a name='4-1-Исследование-корреляционных-связей'></a>\n\nПостроим матрицу корреляции.\n\n\n<a name='Сильная-положительная-корреляция-между-жилой-площадью-и-общей-площадью'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Сильная-положительная-корреляция-между-числом-комнат-и-общей-площадью'></a><a name='Сильная-положительная-корреляция-между-числом-комнат-и-жилой-площадью'></a><a name='Сильная-отрицательная-корреляция-между-отношением-площади-кухни-к-общей-площади-и-отношением-жилой-площади-к-общей-площади'></a>\n\n**Наблюдения:**     \n \n- Сильная положительная корреляция между жилой площадью и общей площадью\n- Сильная положительная корреляция между числом комнат и общей площадью\n- Сильная положительная корреляция между числом комнат и жилой площадью\n- Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади\n- Умеренная положительная корреляция между площадью кухни и общей площадью\n- Умеренная положительная корреляция между ценой и общей площадью\n- Умеренная положительная корреляция между ценой и жилой площадью\n- Умеренная положительная корреляция между ценой и площадью кухни\n- Умеренная положительная корреляция между ценой и жилой площадью\n\nПостроим модель случайного леса для определения цены и посмотрим какие переменные сильнее всего влияют на решения модели.   \n\n<a name='Общая-площадь-является-самым-значимым-признаком-для-предсказания-цены-квартиры--Число-дней-экспозиции-находится-на-втором-месте-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- Общая площадь является самым значимым признаком для предсказания цены квартиры.   \nЧисло дней экспозиции находится на втором месте. \n\n### 4.2 Изучение зависимостей между числовыми переменными<a name='4-2-Изучение-зависимостей-между-числовыми-переменными'></a>\n\nИзучим зависимости между числовыми переменными, используя графики рассеяния.\n\n<a name='Можно-заметить--что-чем-ближе-к-центру-или-парку--тем-дороже-стоит-квартира-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a><a name='Чем-больше-число-комнат--тем-больше-общая-площадь-'></a><a name='Чем-больше-число-комнат--тем-больше-жилая-площадь-'></a>\n\n**Наблюдения:**      \n\n- С ростом цены растет общая площадь, жилая площадь и площадь кухни.\n- Есть небольшая зависимость между ценой и количеством этажей. Чем больше цена, тем меньше этажей.  \nЭто скорее всего связано с тем, что старые дома имеют меньше этажей и загородные дома имеют также меньше этажей.\n- Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.\n- Чем больше число комнат, тем больше общая площадь, что логично.  \n- Чем ближе к центру, тем меньше общая площадь. Скорее всего это связано с тем, что в центре больше студий.  \n- Чем больше число комнат, тем больше жилая площадь, что логично.  \n\n### 4.3 Изучение зависимостей между категориальными переменными<a name='4-3-Изучение-зависимостей-между-категориальными-переменными'></a>\n\nИзучим распределение долей в категориальных переменных. \n\n**Наблюдения:**       \n\n- В этажах кроме первого и последнего комфорта больше всего.\n\nПосмотрим на распределение количества элементов между группами\n\n**Наблюдения:**    \n\n- Больше всего квартир комфорт класса с этажом не первым и не последним.\n\n<a name='В-воскресенье-и-субботу-меньше-всего-публикаций'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**    \n\n- В воскресенье и субботу меньше всего публикаций\n\n**Наблюдения:**    \n- Больше всего объявлений со средней удаленностью от центра.\n\n### 4.4 Анализ временных зависимостей<a name='4-4-Анализ-временных-зависимостей'></a>\n\n<a name='Есть-тренд-на-увеличение-количества-фотографий-по-годам-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- Есть тренд на увеличение количества фотографий по годам.\n\n**Наблюдения:**       \n\n- Медианная цена квартиры не сильно изменяется со временем\n\n**Наблюдения:**      \n\n- Медианная площадь квартир не сильно меняется со временем\n\n**Наблюдения:**      \n\n- Медианная стоимость квадратного метра практически не меняется со временем\n\n### 4.5 Изучение зависимостей между числовыми и категориальными переменными<a name='4-5-Изучение-зависимостей-между-числовыми-и-категориальными-переменными'></a>\n\nПосмотрим на взаимосвязи между числовыми и категориальными переменными.\n\n<a name='В-премиуме-среднее-количество-комнат-больше-на-всех-этажах'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В премиуме среднее количество комнат больше на всех этажах\n\n<a name='У-премиум-площадь-квартир-больше-на-всех-этажах'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- У премиум площадь квартир больше на всех этажах\n\n<a name='В-центре-медианная-стоимость-квартир-выше'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианная стоимость квартир выше\n\n<a name='В-центре-медианная-площадь-квартир-больше'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианная площадь квартир больше\n\n<a name='В-центре-медианное-количество-комнат-больше'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианное количество комнат больше\n\n<a name='В-центре-медианная-высота-потолков-выше-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианная высота потолков выше.\n\n**Наблюдения:**       \n\n- Самые высокие дома находятся на средней удаленности от центра\n\n<a name='В-центре-медианное-количество-дней-экспозиции-больше-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**       \n\n- В центре медианное количество дней экспозиции больше. \n\n### 4.6 Анализ срезов данных<a name='4-6-Анализ-срезов-данных'></a>\n\nИзучим объявления в центре и сравним их с объявлениями в целом.  \n\n<a name='Среднее-и-медиана-в-центре-для-цены-выше-почти-в-2-раза--чем-во-всем-датафрейме-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n\n- Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме. \n\n<a name='Общая-площадь-в-центре-больше--чем-во-всем-датафрейме-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n\n- Общая площадь в центре больше, чем во всем датафрейме.\n\n<a name='Высота-потолков-в-центре-больше--чем-во-всем-датафрейме'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n\n- Высота потолков в центре больше, чем во всем датафрейме\n\n<a name='В-центре-меньше-балконов--чем-во-всем-датафрейме-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- В центре меньше балконов, чем во всем датафрейме.\n\n**Наблюдения:**      \n- В центре больше парков.\n\n**Наблюдения:**      \n- В центре объявления дольше находятся в экспозиции.\n\n<a name='В-центре-меньше-эконома-и-больше-премиум-квартир-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- В центре меньше эконома и больше премиум квартир.  \n\nПосмотрим на цену квадратного метра в 10 населенных пунктах с наибольшим количеством объявлений.  \n\nПосмотрим на среднюю цену квадратного метра в этих населённых пунктах.\n\n<a name='Санкт--Петербург--Пушкин-и-деревня-Кудрово-имеют-самую-большую-цену-квадратного-метра-'></a>\n<a href=\"#ref-to-conclusions\">Вернуться к выводам</a>\n\n**Наблюдения:**      \n- Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.  \n\n### 4.7 Промежуточный вывод<a name='4-7-Промежуточный-вывод'></a>\n\n- Сильная положительная корреляция между жилой площадью и общей площадью\n- Сильная положительная корреляция между числом комнат и общей площадью\n- Сильная положительная корреляция между числом комнат и жилой площадью\n- Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади\n- Умеренная положительная корреляция между площадью кухни и общей площадью\n- Умеренная положительная корреляция между ценой и общей площадью\n- Умеренная положительная корреляция между ценой и жилой площадью\n- Умеренная положительная корреляция между ценой и площадью кухни\n- Умеренная положительная корреляция между ценой и жилой площадью\n- Общая площадь является самым значимым признаком для предсказания цены квартиры. Число дней экспозиции находится на втором месте. \n- С ростом цены растет общая площадь, жилая площадь и площадь кухни.\n- Есть небольшая зависимость между ценой и количеством этажей. Чем больше цена, тем меньше этажей.  \nЭто скорее всего связано с тем, что старые дома имеют меньше этажей и загородные дома имеют также меньше этажей.\n- Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.\n- Чем больше число комнат, тем больше общая площадь.  \n- Чем больше число комнат, тем больше жилая площадь.  \n- В воскресенье и субботу меньше всего публикаций\n- Больше всего объявлений со средней удаленностью от центра.\n- Есть тренд на увеличение количества фотографий по годам.\n- Медианная цена квартиры не сильно изменяется со временем\n- Медианная площадь квартир не сильно меняется со временем\n- Медианная стоимость квадратного метра практически не меняется со временем\n- В премиуме среднее количество комнат больше на всех этажах\n- У премиум площадь квартир больше на всех этажах\n- В центре медианная стоимость квартир выше\n- В центре медианная площадь квартир больше\n- В центре медианное количество комнат больше\n- В центре медианная высота потолков выше.\n- Самые высокие дома находятся на средней удаленности от центра\n- В центре медианное количество дней экспозиции больше. \n- Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме. \n- Общая площадь в центре больше, чем во всем датафрейме.\n- Высота потолков в центре больше, чем во всем датафрейме\n- В центре меньше балконов, чем во всем датафрейме.\n- В центре объявления дольше находятся в экспозиции.\n- В центре меньше эконома и больше премиум квартир.  \n- Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.  \n\n\n## 5. Формулирование и провера гипотез<a name='5--Формулирование-и-провера-гипотез'></a>\n\n### 5.1 Формулирование гипотез<a name='5-1-Формулирование-гипотез'></a>\n\nНа основе проведенного анализа данных сформулируем следующие гипотезы:\n\nГипотеза 1: Нет зависимости между количеством публикаций и днем недели.  \nГипотеза 2: Удаленность от центра не влияет на количество публикаций.  \nГипотеза 3: Площадь квартир не зависит от времени.  \nГипотеза 4: Площадь квартиры не зависит от ценового сегмента.  \nГипотеза 5: Количество дней экспозиции не зависит от удаленности от центра.   \n\n### 5.2 Проверка гипотез<a name='5-2-Проверка-гипотез'></a>\n\nПроверим сформулированные гипотезы.\n\n**Гипотеза 1: Нет зависимости между количеством публикаций и днем недели.**  \n\nH0: День недели не влияет на количество объявлений  \nH1: День недели влияет на количество объявлений\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что есть зависимость между количеством публикаций и днем недели подтвердилась.  \n\n**Гипотеза 2: Удаленность от центра не влияет на количество публикаций.**  \n\nH0: Удаленность от центра не влияет на количество объявлений  \nH1: Удаленность от центра влияет на количество объявлений\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что удаленность от центра влияет на количество публикаций, подтвердилась.  \n\n**Гипотеза 3: Площадь квартир не зависит от времени.**  \n\nH0: Площадь квартир не зависит от времени.  \nH1: Площадь квартир зависит от времени.  \n\nПосмотрим на распределение площади квартир.  \n\nТак как у нас не нормальное распределение, то используем непараметрический критерий Краскела-Уоллиса.\n\nУровень значимости alpha выберем 0.05\n\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что площадь квартир не зависит от времени, не подтвердилась.  \nНужно учесть, что в одной из групп меньше 30 элементов. Есть основания не доверять результатам.\n\n\n**Гипотеза 4: Площадь квартиры не зависит от ценового сегмента.**  \n\nH0: Площадь квартиры не зависит от ценового сегмента.  \nH1: Площадь квартиры зависит от ценового сегмента.  \n\nТак как у нас не нормальное распределение, то используем непараметрический критерий Краскела-Уоллиса.\n\nУровень значимости alpha выберем 0.05\n\n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что площадь квартиры зависит от ценового сегмента, подтвердилась.    \n\n**Гипотеза 5: Количество дней экспозиции не зависит от удаленности от центра.**  \n\nH0: Количество дней экспозиции не зависит от удаленности от центра.  \nH1: Количество дней экспозиции зависит от удаленности от центра.  \n\nПосмотрим на распределение количества дней экспозиции.\n\nТак как у нас не нормальное распределение, то используем непараметрический критерий Краскела-Уоллиса.\n\nУровень значимости alpha выберем 0.05\n\n\nТак как у нас есть пропуски, то для проведения теста их удалим.  \nБудем полагать, что пропуски носят случайный характер и не повлияют на результат теста.  \n\n**Результат:**  \nНа уровне значимости 0.05 гипотеза, что количество дней экспозиции зависит от удаленности от центра, подтвердилась.  \n\n\n### 5.3 Промежуточный вывод<a name='5-3-Промежуточный-вывод'></a>\n\n- На уровне значимости 0.05 гипотеза, что есть зависимость между количеством публикаций и днем недели подтвердилась.  \n- На уровне значимости 0.05 гипотеза, что удаленность от центра влияет на количество публикаций, подтвердилась.  \n- На уровне значимости 0.05 гипотеза, что площадь квартир не зависит от времени, не подтвердилась.  \nНужно учесть, что в одной из групп меньше 30 элементов. Есть основания не доверять результатам.\n- На уровне значимости 0.05 гипотеза, что площадь квартиры зависит от ценового сегмента, подтвердилась.   \n- На уровне значимости 0.05 гипотеза, что количество дней экспозиции зависит от удаленности от центра, подтвердилась.  \n\n## 6. Общий вывод<a name='6--Общий-вывод'></a>\n\n**Выводы:**  \n- Сильная положительная корреляция между жилой площадью и общей площадью  \n- Сильная положительная корреляция между числом комнат и общей площадью  \n- Сильная положительная корреляция между числом комнат и жилой площадью  \n- Сильная отрицательная корреляция между отношением площади кухни к общей площади и отношением жилой площади к общей площади  \n- Умеренная положительная корреляция между площадью кухни и общей площадью  \n- Умеренная положительная корреляция между ценой и общей площадью  \n- Умеренная положительная корреляция между ценой и жилой площадью  \n- Умеренная положительная корреляция между ценой и площадью кухни  \n- Умеренная положительная корреляция между ценой и жилой площадью  \n- Общая площадь является самым значимым признаком для предсказания цены квартиры. Число дней экспозиции находится на втором месте.   \n- Есть небольшая зависимость между ценой и количеством этажей. Чем больше цена, тем меньше этажей.    \nЭто скорее всего связано с тем, что старые дома имеют меньше этажей и загородные дома имеют также меньше этажей.  \n- Можно заметить, что чем ближе к центру или парку, тем дороже стоит квартира.  \n- В среднем объявление находится в продаже 180 дней.  \n- Чем больше число комнат, тем больше общая площадь.    \n- Чем больше число комнат, тем больше жилая площадь.    \n- В воскресенье и субботу меньше всего публикаций  \n- Больше всего объявлений со средней удаленностью от центра.  \n- Есть тренд на увеличение количества фотографий по годам.  \n- Медианная цена квартиры не сильно изменяется со временем  \n- Медианная площадь квартир не сильно меняется со временем  \n- Медианная стоимость квадратного метра практически не меняется со временем  \n- В премиуме среднее количество комнат больше на всех этажах  \n- У премиум площадь квартир больше на всех этажах  \n- В центре медианная стоимость квартир выше  \n- В центре медианная площадь квартир больше  \n- В центре медианное количество комнат больше  \n- В центре медианная высота потолков выше.  \n- Самые высокие дома находятся на средней удаленности от центра  \n- В центре медианное количество дней экспозиции больше.   \n- Среднее и медиана в центре для цены выше почти в 2 раза, чем во всем датафрейме.   \n- Общая площадь в центре больше, чем во всем датафрейме.  \n- Высота потолков в центре больше, чем во всем датафрейме  \n- В центре меньше балконов, чем во всем датафрейме.  \n- В центре объявления дольше находятся в экспозиции.  \n- В центре меньше эконома и больше премиум квартир.    \n- Санкт--Петербург, Пушкин и деревня Кудрово имеют самую большую цену квадратного метра.    \n\n**Аномалии и особенности в данных:**  \n- Минимальное значение цены 12 190 является аномальным.  \n- В высоте потолков есть пропуски (39 процентов)  \n- В высоте потолков много выбросов. Есть значение 100.  \n- В количестве этажей есть пропуски (меньше 1 процента)  \n- В жилой площади 8 процентов пропусков.  \n- В площади кухни 10 процентов пропусков.    \n- В числе балконов 49 процентов пропусков. Скорее всего пропуски это отсутствие балкона.    \n- В расстоянии до ближайшего аэропорта 23 процента пропусков.  \n- В расстоянии до центр города 23 процента пропусков.   \n- В колонке с количеством парков рядом 23 процента пропусков.    \n- В колонке с расстоянием до ближайшего парка 66 процентов пропусков.    \n- В колонке с количеством прудов 23 процента пропусков, скорее всего это отсутствие парков.    \n- В колонке с расстоянием до ближайшего пруда 62 процента пропусков.   \n- В колонке с количеством дней экспозиции 13 процентов пропусков.   \n- В колонке с признаком является ли квартира апартаментом 88 процентов пропусков. Скорее всего эти квартиры не являются апартаментами.    \n- В колонке с названием населенного пункта 49 пропущенных значений (меньше 1 процента)  \n- Пропуски в колонках с количеством парков рядом, количеством прудов рядом,  \nрасстоянием до центра, расстоянием до аэропорта совпадают.  \n- Пропуски в количестве этажей совпадают с пропусками в признаке является ли квартира апартаментом.  \n- В количестве этаже пропуски зависят от признака является ли квартира студией.    \n- Почти все пропуски в квартирах, которые не являются студиями, даже учитывая общее количество пропорций.  \n- В студиях в поле площадь кухни одни пропуски.  \n\n**Результаты предобработки данных:**  \n- Мы выяснили, что 0 комнат указано у студий, либо в открытой планировке, либо у квартир с площадью до 40 кв.,  \nпоэтому нули в количестве комнат заменили на 1.  \n- В цене была одна запись со значением 12190. Скорее всего не поставили нули, но сложно определить сколько именно нулей не поставили.  \nТак как это всего 1 запись, то удалили ее. \n- Удалили 36 записей (0.2%) с высотой потолка больше 5 метров. Так как таких записей мало, а замена их может исказить анализ.  \n- В количестве этажей пропуски удалили, так как определить реальный этаж невозможно, а пропусков мало.  \n- Пропуски в жилой площади и в площади кухни обработали с помощью коэффициентов отношения площадей.  \nПри этом расчеты провели с учетом количества комнат, чтобы было точнее.  \n\n**Результаты проверки гипотез:**  \n- Гипотеза 1: Нет зависимости между количеством публикаций и днем недели.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 2: Удаленность от центра не влияет на количество публикаций.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 3: Площадь квартир не зависит от времени.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 4: Площадь квартиры не зависит от ценового сегмента.  \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n- Гипотеза 5: Количество дней экспозиции не зависит от удаленности от центра.   \n**Результат:** на уровне значимости 0.05 гипотеза не подтвердилась.  \n\n\n**Рекомендации:**  \n- Добавить контроль ввода слишком больших и слишком маленьких значений для цены, высоты потолка.  \n- Добавить контроль ввода для количества комнат, чтобы исключить ввод нулевых значений.  \n- Выяснить почему пропуски в колонках с количеством парков рядом, количеством прудов рядом,  \nрасстоянием до центра, расстоянием до аэропорта в одних и тех же строках.  \n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"housing_ads_investigation.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.37","theme":"flatly","description_for_list":"Исследование факторов, влияющих на ценообразование на рынке недвижимости в Санкт-Петербурге.","title":"Исследование объявлений о продаже квартир","code-summary":"Show the code","fontsize":"16px","smooth-scroll":true,"toc-location":"left","toc-title":"Оглавление","grid":{"body-width":"1100px"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}